/*! chevrotain - v0.18.0 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("chevrotain",[],e):"object"==typeof exports?exports.chevrotain=e():t.chevrotain=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var r=n(1),o=n(9),i=n(8),a=n(5),s=n(7),c=n(22),u=n(16),p={};p.VERSION="0.18.0",p.Parser=r.Parser,p.ParserDefinitionErrorType=r.ParserDefinitionErrorType,p.Lexer=o.Lexer,p.LexerDefinitionErrorType=o.LexerDefinitionErrorType,p.Token=i.Token,p.LazyToken=i.LazyToken,p.SimpleLazyToken=i.SimpleLazyToken,p.VirtualToken=i.VirtualToken,p.EOF=i.EOF,p.extendToken=i.extendToken,p.extendLazyToken=i.extendLazyToken,p.extendSimpleLazyToken=i.extendSimpleLazyToken,p.tokenName=i.tokenName,p.tokenLabel=i.tokenLabel,p.tokenMatcher=i.tokenMatcher,p.getImage=i.getImage,p.getStartOffset=i.getStartOffset,p.getStartLine=i.getStartLine,p.getStartColumn=i.getStartColumn,p.getEndOffset=i.getEndOffset,p.getEndLine=i.getEndLine,p.getEndColumn=i.getEndColumn,p.getTokenConstructor=i.getTokenConstructor,p.EMPTY_ALT=r.EMPTY_ALT,p.exceptions={},p.exceptions.isRecognitionException=a.exceptions.isRecognitionException,p.exceptions.EarlyExitException=a.exceptions.EarlyExitException,p.exceptions.MismatchedTokenException=a.exceptions.MismatchedTokenException,p.exceptions.NotAllInputParsedException=a.exceptions.NotAllInputParsedException,p.exceptions.NoViableAltException=a.exceptions.NoViableAltException,p.gast={},p.gast.GAstVisitor=s.gast.GAstVisitor,p.gast.Flat=s.gast.Flat,p.gast.Repetition=s.gast.Repetition,p.gast.RepetitionWithSeparator=s.gast.RepetitionWithSeparator,p.gast.RepetitionMandatory=s.gast.RepetitionMandatory,p.gast.RepetitionMandatoryWithSeparator=s.gast.RepetitionMandatoryWithSeparator,p.gast.Option=s.gast.Option,p.gast.Alternation=s.gast.Alternation,p.gast.NonTerminal=s.gast.NonTerminal,p.gast.Terminal=s.gast.Terminal,p.gast.Rule=s.gast.Rule,p.gast.serializeGrammar=s.gast.serializeGrammar,p.gast.serializeProduction=s.gast.serializeProduction,p.interperter={},p.interperter.NextAfterTokenWalker=u.NextAfterTokenWalker,p.clearCache=c.clearCache,t.exports=p},function(t,e,n){"use strict";function r(t){return void 0===t&&(t=void 0),function(){return t}}function o(t){this.name=O,this.message=t}var i=n(2),a=n(5),s=n(3),c=n(6),u=n(12),p=n(4),f=n(18),l=n(8),h=n(15),d=n(20),T=n(16),y=n(19),E=n(7),g=n(13),m=n(11),v=E.gast.serializeGrammar;!function(t){t[t.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",t[t.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",t[t.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",t[t.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",t[t.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",t[t.LEFT_RECURSION=5]="LEFT_RECURSION",t[t.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",t[t.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS"}(e.ParserDefinitionErrorType||(e.ParserDefinitionErrorType={}));var O=(e.ParserDefinitionErrorType,"InRuleRecoveryException"),R=new l.EOF;R.tokenType=l.EOF.tokenType,Object.freeze(R);var A=4,I=4,N=1<<A,k=2<<A,S=3<<A,L=4<<A,_=5<<A,P=6<<A,x=Object.freeze({recoveryEnabled:!1,maxLookahead:5,ignoredIssues:{},dynamicTokensEnabled:!1}),F=Object.freeze({recoveryValueFunc:function(){},resyncEnabled:!0});e.EMPTY_ALT=r;var M={},C=function(){function t(t,e,n){if(void 0===n&&(n=x),this._errors=[],this._input=[],this.inputIdx=-1,this.savedTokenIdx=-1,this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.tokensMap=void 0,this.definedRulesNames=[],this.shortRuleNameToFull=new s.HashTable,this.ruleShortNameIdx=1,this._productions=new s.HashTable,this._input=t,this.recoveryEnabled=p.has(n,"recoveryEnabled")?n.recoveryEnabled:x.recoveryEnabled,this.recoveryEnabled||(this.attemptInRepetitionRecovery=p.NOOP),this.dynamicTokensEnabled=p.has(n,"dynamicTokensEnabled")?n.dynamicTokensEnabled:x.dynamicTokensEnabled,this.maxLookahead=p.has(n,"maxLookahead")?n.maxLookahead:x.maxLookahead,this.ignoredIssues=p.has(n,"ignoredIssues")?n.ignoredIssues:x.ignoredIssues,this.className=s.classNameFromInstance(this),this.firstAfterRepMap=i.getFirstAfterRepForClass(this.className),this.classLAFuncs=i.getLookaheadFuncsForClass(this.className),i.CLASS_TO_DEFINITION_ERRORS.containsKey(this.className)?this.definitionErrors=i.CLASS_TO_DEFINITION_ERRORS.get(this.className):(this.definitionErrors=[],i.CLASS_TO_DEFINITION_ERRORS.put(this.className,this.definitionErrors)),p.isArray(e))this.tokensMap=p.reduce(e,function(t,e){return t[l.tokenName(e)]=e,t},{});else{if(!p.isObject(e))throw new Error("'tokensMapOrArr' argument must be An Array of Token constructors or a Dictionary of Tokens.");this.tokensMap=p.cloneObj(e)}var r=p.values(this.tokensMap),o=p.every(r,function(t){return m.isSimpleTokenType(t)});o?(this.tokenMatcher=m.tokenStructuredMatcher,this.tokenClassIdentityFunc=m.tokenStructuredIdentity,this.tokenInstanceIdentityFunc=m.tokenStructuredIdentity):(this.tokenMatcher=m.tokenInstanceofMatcher,this.tokenClassIdentityFunc=m.tokenClassIdentity,this.tokenInstanceIdentityFunc=m.tokenInstanceIdentity),this.tokensMap.EOF=l.EOF,m.augmentTokenClasses(p.values(this.tokensMap))}return t.performSelfAnalysis=function(e){var n,r=[],o=s.classNameFromInstance(e);if(""===o)throw Error("A Parser's constructor may not be an anonymous Function, it must be a named function\nThe constructor's name is used at runtime for performance (caching) purposes.");if(!i.CLASS_TO_SELF_ANALYSIS_DONE.containsKey(o)){i.CLASS_TO_SELF_ANALYSIS_DONE.put(o,!0);var a=e._productions,l=new s.HashTable;p.forEach(a.keys(),function(t){var e=a.get(t);l.put(t,g.cloneProduction(e))}),i.getProductionsForClass(o).putAll(l),r=i.CLASS_TO_DEFINITION_ERRORS.get(o);var h=c.resolveGrammar(l);if(r.push.apply(r,h),p.isEmpty(h)){var d=u.validateGrammar(l.values(),e.maxLookahead,e.ignoredIssues);r.push.apply(r,d)}if(!p.isEmpty(r)&&!t.DEFER_DEFINITION_ERRORS_HANDLING)throw n=p.map(r,function(t){return t.message}),new Error("Parser Definition Errors detected\n: "+n.join("\n-------------------------------\n"));if(p.isEmpty(r)){var T=f.computeAllProdsFollows(l.values());i.setResyncFollowsForClass(o,T)}}if(!p.isEmpty(i.CLASS_TO_DEFINITION_ERRORS.get(o))&&!t.DEFER_DEFINITION_ERRORS_HANDLING)throw n=p.map(i.CLASS_TO_DEFINITION_ERRORS.get(o),function(t){return t.message}),new Error("Parser Definition Errors detected\n: "+n.join("\n-------------------------------\n"))},Object.defineProperty(t.prototype,"errors",{get:function(){return p.cloneArr(this._errors)},set:function(t){this._errors=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"input",{get:function(){return p.cloneArr(this._input)},set:function(t){this.reset(),this._input=t},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.resetLexerState(),this.isBackTrackingStack=[],this.errors=[],this._input=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[]},t.prototype.isAtEndOfInput=function(){return this.tokenMatcher(this.LA(1),l.EOF)},t.prototype.getGAstProductions=function(){return i.getProductionsForClass(this.className)},t.prototype.getSerializedGastProductions=function(){return v(i.getProductionsForClass(this.className).values())},t.prototype.computeContentAssist=function(t,e){var n=i.getProductionsForClass(this.className).get(t);if(p.isUndefined(n))throw Error("Rule ->"+t+"<- does not exist in this grammar.");return T.nextPossibleTokensAfter([n],e,this.tokenMatcher,this.maxLookahead)},t.prototype.isBackTracking=function(){return!p.isEmpty(this.isBackTrackingStack)},t.prototype.getCurrRuleFullName=function(){var t=p.last(this.RULE_STACK);return this.shortRuleNameToFull.get(t)},t.prototype.shortRuleNameToFullName=function(t){return this.shortRuleNameToFull.get(t)},t.prototype.getHumanReadableRuleStack=function(){var t=this;return p.map(this.RULE_STACK,function(e){return t.shortRuleNameToFullName(e)})},t.prototype.SAVE_ERROR=function(t){if(a.exceptions.isRecognitionException(t))return t.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:p.cloneArr(this.RULE_OCCURRENCE_STACK)},this._errors.push(t),t;throw Error("Trying to save an Error which is not a RecognitionException")},t.prototype.BACKTRACK=function(t,e){return function(){this.isBackTrackingStack.push(1);var n=this.saveRecogState();try{var r=t.call(this);return e(r)}catch(t){if(a.exceptions.isRecognitionException(t))return!1;throw t}finally{this.reloadRecogState(n),this.isBackTrackingStack.pop()}}},t.prototype.SKIP_TOKEN=function(){return this.inputIdx<=this._input.length-2?(this.consumeToken(),this.LA(1)):R},t.prototype.CONSUME=function(t){return this.CONSUME1(t)},t.prototype.CONSUME1=function(t){return this.consumeInternal(t,1)},t.prototype.CONSUME2=function(t){return this.consumeInternal(t,2)},t.prototype.CONSUME3=function(t){return this.consumeInternal(t,3)},t.prototype.CONSUME4=function(t){return this.consumeInternal(t,4)},t.prototype.CONSUME5=function(t){return this.consumeInternal(t,5)},t.prototype.SUBRULE=function(t,e){return void 0===e&&(e=[]),this.SUBRULE1(t,e)},t.prototype.SUBRULE1=function(t,e){return void 0===e&&(e=[]),t.call(this,1,e)},t.prototype.SUBRULE2=function(t,e){return void 0===e&&(e=[]),t.call(this,2,e)},t.prototype.SUBRULE3=function(t,e){return void 0===e&&(e=[]),t.call(this,3,e)},t.prototype.SUBRULE4=function(t,e){return void 0===e&&(e=[]),t.call(this,4,e)},t.prototype.SUBRULE5=function(t,e){return void 0===e&&(e=[]),t.call(this,5,e)},t.prototype.OPTION=function(t,e){return this.OPTION1.call(this,t,e)},t.prototype.OPTION1=function(t,e){return this.optionInternal(t,e,1)},t.prototype.OPTION2=function(t,e){return this.optionInternal(t,e,2)},t.prototype.OPTION3=function(t,e){return this.optionInternal(t,e,3)},t.prototype.OPTION4=function(t,e){return this.optionInternal(t,e,4)},t.prototype.OPTION5=function(t,e){return this.optionInternal(t,e,5)},t.prototype.OR=function(t,e){return this.OR1(t,e)},t.prototype.OR1=function(t,e){return this.orInternal(t,e,1)},t.prototype.OR2=function(t,e){return this.orInternal(t,e,2)},t.prototype.OR3=function(t,e){return this.orInternal(t,e,3)},t.prototype.OR4=function(t,e){return this.orInternal(t,e,4)},t.prototype.OR5=function(t,e){return this.orInternal(t,e,5)},t.prototype.MANY=function(t,e){return this.MANY1.call(this,t,e)},t.prototype.MANY1=function(t,e){this.manyInternal(this.MANY1,1,t,e)},t.prototype.MANY2=function(t,e){this.manyInternal(this.MANY2,2,t,e)},t.prototype.MANY3=function(t,e){this.manyInternal(this.MANY3,3,t,e)},t.prototype.MANY4=function(t,e){this.manyInternal(this.MANY4,4,t,e)},t.prototype.MANY5=function(t,e){this.manyInternal(this.MANY5,5,t,e)},t.prototype.MANY_SEP=function(t,e){return this.MANY_SEP1.call(this,t,e)},t.prototype.MANY_SEP1=function(t,e){return this.manySepFirstInternal(this.MANY_SEP1,1,t,e)},t.prototype.MANY_SEP2=function(t,e){return this.manySepFirstInternal(this.MANY_SEP2,2,t,e)},t.prototype.MANY_SEP3=function(t,e){return this.manySepFirstInternal(this.MANY_SEP3,3,t,e)},t.prototype.MANY_SEP4=function(t,e){return this.manySepFirstInternal(this.MANY_SEP4,4,t,e)},t.prototype.MANY_SEP5=function(t,e){return this.manySepFirstInternal(this.MANY_SEP5,5,t,e)},t.prototype.AT_LEAST_ONE=function(t,e,n){return this.AT_LEAST_ONE1.call(this,t,e,n)},t.prototype.AT_LEAST_ONE1=function(t,e,n){this.atLeastOneInternal(this.AT_LEAST_ONE1,1,t,e,n)},t.prototype.AT_LEAST_ONE2=function(t,e,n){this.atLeastOneInternal(this.AT_LEAST_ONE2,2,t,e,n)},t.prototype.AT_LEAST_ONE3=function(t,e,n){this.atLeastOneInternal(this.AT_LEAST_ONE3,3,t,e,n)},t.prototype.AT_LEAST_ONE4=function(t,e,n){this.atLeastOneInternal(this.AT_LEAST_ONE4,4,t,e,n)},t.prototype.AT_LEAST_ONE5=function(t,e,n){this.atLeastOneInternal(this.AT_LEAST_ONE5,5,t,e,n)},t.prototype.AT_LEAST_ONE_SEP=function(t,e,n){return this.AT_LEAST_ONE_SEP1.call(this,t,e,n)},t.prototype.AT_LEAST_ONE_SEP1=function(t,e,n){return this.atLeastOneSepFirstInternal(this.atLeastOneSepFirstInternal,1,t,e,n)},t.prototype.AT_LEAST_ONE_SEP2=function(t,e,n){return this.atLeastOneSepFirstInternal(this.atLeastOneSepFirstInternal,2,t,e,n)},t.prototype.AT_LEAST_ONE_SEP3=function(t,e,n){return this.atLeastOneSepFirstInternal(this.atLeastOneSepFirstInternal,3,t,e,n)},t.prototype.AT_LEAST_ONE_SEP4=function(t,e,n){return this.atLeastOneSepFirstInternal(this.atLeastOneSepFirstInternal,4,t,e,n)},t.prototype.AT_LEAST_ONE_SEP5=function(t,e,n){return this.atLeastOneSepFirstInternal(this.atLeastOneSepFirstInternal,5,t,e,n)},t.prototype.RULE=function(t,e,n){void 0===n&&(n=F);var r=u.validateRuleName(t,this.className);if(r=r.concat(u.validateRuleDoesNotAlreadyExist(t,this.definedRulesNames,this.className)),this.definedRulesNames.push(t),this.definitionErrors.push.apply(this.definitionErrors,r),this._productions.containsKey(t)){var o=i.getProductionsForClass(this.className),a=o.get(t);p.isUndefined(a)||this._productions.put(t,a)}else{var s=d.buildTopProduction(e.toString(),t,this.tokensMap);this._productions.put(t,s)}return this.defineRule(t,e,n)},t.prototype.OVERRIDE_RULE=function(t,e,n){void 0===n&&(n=F);var r=u.validateRuleName(t,this.className);r=r.concat(u.validateRuleIsOverridden(t,this.definedRulesNames,this.className)),this.definitionErrors.push.apply(this.definitionErrors,r);var o=i.getProductionOverriddenForClass(this.className);if(o.containsKey(t)){var a=i.getProductionsForClass(this.className);this._productions.put(t,a.get(t))}else{o.put(t,!0);var s=d.buildTopProduction(e.toString(),t,this.tokensMap);this._productions.put(t,s)}return this.defineRule(t,e,n)},t.prototype.ruleInvocationStateUpdate=function(t,e){this.RULE_OCCURRENCE_STACK.push(e),this.RULE_STACK.push(t)},t.prototype.ruleFinallyStateUpdate=function(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),0===this.RULE_STACK.length&&!this.isAtEndOfInput()){var t=this.LA(1);this.SAVE_ERROR(new a.exceptions.NotAllInputParsedException("Redundant input, expecting EOF but found: "+l.getImage(t),t))}},t.prototype.getTokenToInsert=function(t){var e;if(l.LazyToken.prototype.isPrototypeOf(t.prototype))e=new t(NaN,NaN,{orgText:"",lineToOffset:[]});else if(l.SimpleLazyToken.prototype.isPrototypeOf(t.prototype))e={startOffset:NaN,endOffset:NaN,cacheData:{orgText:"",lineToOffset:[]}};else{if(!l.Token.prototype.isPrototypeOf(t.prototype))throw Error("non exhaustive match");e=new t("",NaN,NaN,NaN,NaN,NaN)}return e.isInsertedInRecovery=!0,e},t.prototype.canTokenTypeBeInsertedInRecovery=function(t){return!0},t.prototype.getMisMatchTokenErrorMessage=function(t,e){var n=l.hasTokenLabel(t),r=n?"--> "+l.tokenLabel(t)+" <--":"token of type --> "+l.tokenName(t)+" <--",o="Expecting "+r+" but found --> '"+l.getImage(e)+"' <--";return o},t.prototype.getCurrentGrammarPath=function(t,e){var n=this.getHumanReadableRuleStack(),r=p.cloneArr(this.RULE_OCCURRENCE_STACK),o={ruleStack:n,occurrenceStack:r,lastTok:t,lastTokOccurrence:e};return o},t.prototype.getNextPossibleTokenTypes=function(t){var e=p.first(t.ruleStack),n=this.getGAstProductions(),r=n.get(e),o=new T.NextAfterTokenWalker(r,t).startWalking();return o},t.prototype.consumeInternal=function(t,e){return this.recoveryEnabled?this.consumeInternalWithTryCatch(t,e):this.consumeInternalOptimized(t)},t.prototype.consumeInternalWithTryCatch=function(t,e){try{return this.consumeInternalOptimized(t)}catch(r){if(!this.recoveryEnabled||"MismatchedTokenException"!==r.name||this.isBackTracking())throw r;var n=this.getFollowsForInRuleRecovery(t,e);try{return this.tryInRuleRecovery(t,n)}catch(t){throw t.name===O?r:t}}},t.prototype.NEXT_TOKEN=function(){return this.LA(1)},t.prototype.LA=function(t){return this._input.length<=this.inputIdx+t?R:this._input[this.inputIdx+t]},t.prototype.consumeToken=function(){this.inputIdx++},t.prototype.saveLexerState=function(){this.savedTokenIdx=this.inputIdx},t.prototype.restoreLexerState=function(){this.inputIdx=this.savedTokenIdx},t.prototype.resetLexerState=function(){this.inputIdx=-1},t.prototype.moveLexerStateToEnd=function(){this.inputIdx=this.input.length-1},t.prototype.saveRecogState=function(){var t=this.errors,e=p.cloneArr(this.RULE_STACK);return{errors:t,lexerState:this.inputIdx,RULE_STACK:e}},t.prototype.reloadRecogState=function(t){this.errors=t.errors,this.inputIdx=t.lexerState,this.RULE_STACK=t.RULE_STACK},t.prototype.defineRule=function(t,e,n){function r(t){var n=e.apply(this,t);return this.ruleFinallyStateUpdate(),n}function o(t,n){try{return e.apply(this,t)}catch(t){if(n)for(var r=this.RULE_STACK.length;r>1;r--)this.ruleFinallyStateUpdate();var o=1===this.RULE_STACK.length,c=i&&!this.isBackTracking()&&this.recoveryEnabled;if(a.exceptions.isRecognitionException(t)){if(c){var u=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(u))return t.resyncedTokens=this.reSyncTo(u),s();throw t}if(o)return this.moveLexerStateToEnd(),s();throw t}throw t}finally{this.ruleFinallyStateUpdate()}}var i=p.has(n,"resyncEnabled")?n.resyncEnabled:F.resyncEnabled,s=p.has(n,"recoveryValueFunc")?n.recoveryValueFunc:F.recoveryValueFunc,c=this.ruleShortNameIdx<<A+I;this.ruleShortNameIdx++,this.shortRuleNameToFull.put(c,t);var u=function(t,e){void 0===t&&(t=1),this.ruleInvocationStateUpdate(c,t);var n=1===this.RULE_STACK.length;return this.recoveryEnabled||n?o.call(this,e,n):r.call(this,e)},f="ruleName";return u[f]=t,u},t.prototype.tryInRepetitionRecovery=function(t,e,n,r){var o=this,i=this.findReSyncTokenType();this.saveLexerState();for(var s=[],c=!1,u=this.LA(1),f=this.LA(1),l=function(){var t=o.getMisMatchTokenErrorMessage(r,u),e=new a.exceptions.MismatchedTokenException(t,u);e.resyncedTokens=p.dropRight(s),o.SAVE_ERROR(e)};!c;){if(this.tokenMatcher(f,r))return void l();if(n.call(this))return l(),void t.apply(this,e);this.tokenMatcher(f,i)?c=!0:(f=this.SKIP_TOKEN(),this.addToResyncTokens(f,s))}this.restoreLexerState()},t.prototype.shouldInRepetitionRecoveryBeTried=function(t,e){return void 0!==t&&void 0!==e&&(!this.tokenMatcher(this.LA(1),t)&&(!this.isBackTracking()&&!this.canPerformInRuleRecovery(t,this.getFollowsForInRuleRecovery(t,e))))},t.prototype.getFollowsForInRuleRecovery=function(t,e){var n=this.getCurrentGrammarPath(t,e),r=this.getNextPossibleTokenTypes(n);return r},t.prototype.tryInRuleRecovery=function(t,e){if(this.canRecoverWithSingleTokenInsertion(t,e)){var n=this.getTokenToInsert(t);return n}if(this.canRecoverWithSingleTokenDeletion(t)){var r=this.SKIP_TOKEN();return this.consumeToken(),r}throw new o("sad sad panda")},t.prototype.canPerformInRuleRecovery=function(t,e){return this.canRecoverWithSingleTokenInsertion(t,e)||this.canRecoverWithSingleTokenDeletion(t)},t.prototype.canRecoverWithSingleTokenInsertion=function(t,e){var n=this;if(!this.canTokenTypeBeInsertedInRecovery(t))return!1;if(p.isEmpty(e))return!1;var r=this.LA(1),o=void 0!==p.find(e,function(t){return n.tokenMatcher(r,t)});return o},t.prototype.canRecoverWithSingleTokenDeletion=function(t){var e=this.tokenMatcher(this.LA(2),t);return e},t.prototype.isInCurrentRuleReSyncSet=function(t){var e=this.getCurrFollowKey(),n=this.getFollowSetFromFollowKey(e);return p.contains(n,t)},t.prototype.findReSyncTokenType=function(){for(var t=this.flattenFollowSet(),e=this.LA(1),n=2;;){var r=l.getTokenConstructor(e);if(p.contains(t,r))return r;e=this.LA(n),n++}},t.prototype.getCurrFollowKey=function(){if(1===this.RULE_STACK.length)return M;var t=this.RULE_STACK.length-1,e=t,n=t-1;return{ruleName:this.shortRuleNameToFullName(this.RULE_STACK[t]),idxInCallingRule:this.RULE_OCCURRENCE_STACK[e],inRule:this.shortRuleNameToFullName(this.RULE_STACK[n])}},t.prototype.buildFullFollowKeyStack=function(){var t=this;return p.map(this.RULE_STACK,function(e,n){return 0===n?M:{ruleName:t.shortRuleNameToFullName(e),idxInCallingRule:t.RULE_OCCURRENCE_STACK[n],inRule:t.shortRuleNameToFullName(t.RULE_STACK[n-1])}})},t.prototype.flattenFollowSet=function(){var t=this,e=p.map(this.buildFullFollowKeyStack(),function(e){return t.getFollowSetFromFollowKey(e)});return p.flatten(e)},t.prototype.getFollowSetFromFollowKey=function(t){if(t===M)return[l.EOF];var e=t.ruleName+t.idxInCallingRule+y.IN+t.inRule;return i.getResyncFollowsForClass(this.className).get(e)},t.prototype.addToResyncTokens=function(t,e){return this.tokenMatcher(t,l.EOF)||e.push(t),e},t.prototype.reSyncTo=function(t){for(var e=[],n=this.LA(1);this.tokenMatcher(n,t)===!1;)n=this.SKIP_TOKEN(),this.addToResyncTokens(n,e);return p.dropRight(e)},t.prototype.attemptInRepetitionRecovery=function(t,e,n,r,o,i){var a=this.getKeyForAutomaticLookahead(r,o),s=this.firstAfterRepMap.get(a);if(void 0===s){var c=this.getCurrRuleFullName(),u=this.getGAstProductions().get(c),p=new i(u,o);s=p.startWalking(),this.firstAfterRepMap.put(a,s)}var f=s.token,h=s.occurrence,d=s.isEndOfRule;1===this.RULE_STACK.length&&d&&void 0===f&&(f=l.EOF,h=1),this.shouldInRepetitionRecoveryBeTried(f,h)&&this.tryInRepetitionRecovery(t,e,n,f)},t.prototype.optionInternal=function(t,e,n){var r=this.getLookaheadFuncForOption(n);if(void 0===e)e=t;else if(!t.call(this))return!1;return!!r.call(this)&&(e.call(this),!0)},t.prototype.atLeastOneInternal=function(t,e,n,r,o){var i=this,a=this.getLookaheadFuncForAtLeastOne(e);if(p.isFunction(r)){var s=a;a=function(){return n.call(i)&&s.call(i)}}else o=r,r=n;if(!a.call(this))throw this.raiseEarlyExitException(e,h.PROD_TYPE.REPETITION_MANDATORY,o);for(r.call(this);a.call(this);)r.call(this);this.attemptInRepetitionRecovery(t,[a,r,o],a,L,e,T.NextTerminalAfterAtLeastOneWalker)},t.prototype.atLeastOneSepFirstInternal=function(t,e,n,r,o){var i=this,a=[],s=this.getLookaheadFuncForAtLeastOneSep(e);if(!s.call(this))throw this.raiseEarlyExitException(e,h.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,o);r.call(this);for(var c=function(){return i.tokenMatcher(i.LA(1),n)};c();)a.push(this.CONSUME(n)),r.call(this);return this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,n,c,r,a,T.NextTerminalAfterAtLeastOneSepWalker],c,P,e,T.NextTerminalAfterAtLeastOneSepWalker),a},t.prototype.manyInternal=function(t,e,n,r){var o=this,i=this.getLookaheadFuncForMany(e);if(void 0===r)r=n;else{var a=i;i=function(){return n.call(o)&&a.call(o)}}for(;i.call(this);)r.call(this);this.attemptInRepetitionRecovery(t,[i,r],i,S,e,T.NextTerminalAfterManyWalker)},t.prototype.manySepFirstInternal=function(t,e,n,r){var o=this,i=[],a=this.getLookaheadFuncForManySep(e);if(a.call(this)){r.call(this);for(var s=function(){return o.tokenMatcher(o.LA(1),n)};s();)i.push(this.CONSUME(n)),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,n,s,r,i,T.NextTerminalAfterManySepWalker],s,_,e,T.NextTerminalAfterManySepWalker)}return i},t.prototype.repetitionSepSecondInternal=function(t,e,n,r,o,i){for(;n();)o.push(this.CONSUME(e)),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,e,n,r,o,i],n,P,t,i)},t.prototype.orInternal=function(t,e,n){var r=this.getLookaheadFuncForOr(n,t),o=r.call(this,t);if(void 0!==o){var i=t[o];return i.ALT.call(this)}this.raiseNoAltException(n,e)},t.prototype.consumeInternalOptimized=function(t){var e=this.LA(1);if(this.tokenMatcher(e,t))return this.consumeToken(),e;var n=this.getMisMatchTokenErrorMessage(t,e);throw this.SAVE_ERROR(new a.exceptions.MismatchedTokenException(n,e))},t.prototype.getKeyForAutomaticLookahead=function(t,e){var n=this.RULE_STACK,r=n[n.length-1];return e|t|r},t.prototype.getLookaheadFuncForOr=function(t,e){var n=this.getKeyForAutomaticLookahead(N,t),r=this.classLAFuncs.get(n);if(void 0===r){var o=this.getCurrRuleFullName(),i=this.getGAstProductions().get(o),a=p.some(e,function(t){return p.isFunction(t.GATE)});return r=h.buildLookaheadFuncForOr(t,i,this.maxLookahead,a,this.tokenMatcher,this.tokenClassIdentityFunc,this.tokenInstanceIdentityFunc,this.dynamicTokensEnabled),this.classLAFuncs.put(n,r),r}return r},t.prototype.getLookaheadFuncForOption=function(t){var e=this.getKeyForAutomaticLookahead(k,t);return this.getLookaheadFuncFor(e,t,h.buildLookaheadForOption,this.maxLookahead)},t.prototype.getLookaheadFuncForMany=function(t){var e=this.getKeyForAutomaticLookahead(S,t);return this.getLookaheadFuncFor(e,t,h.buildLookaheadForMany,this.maxLookahead)},t.prototype.getLookaheadFuncForManySep=function(t){var e=this.getKeyForAutomaticLookahead(_,t);return this.getLookaheadFuncFor(e,t,h.buildLookaheadForManySep,this.maxLookahead)},t.prototype.getLookaheadFuncForAtLeastOne=function(t){var e=this.getKeyForAutomaticLookahead(L,t);return this.getLookaheadFuncFor(e,t,h.buildLookaheadForAtLeastOne,this.maxLookahead)},t.prototype.getLookaheadFuncForAtLeastOneSep=function(t){var e=this.getKeyForAutomaticLookahead(P,t);return this.getLookaheadFuncFor(e,t,h.buildLookaheadForAtLeastOneSep,this.maxLookahead)},t.prototype.raiseNoAltException=function(t,e){var n=" but found: '"+l.getImage(this.LA(1))+"'";if(void 0===e){var r=this.getCurrRuleFullName(),o=this.getGAstProductions().get(r),i=h.getLookaheadPathsForOr(t,o,this.maxLookahead),s=p.reduce(i,function(t,e){return t.concat(e)},[]),c=p.map(s,function(t){return"["+p.map(t,function(t){return l.tokenLabel(t)}).join(",")+"]"});e="one of these possible Token sequences:\n  <"+c.join(" ,")+">"}throw this.SAVE_ERROR(new a.exceptions.NoViableAltException("Expecting: "+e+" "+n,this.LA(1)))},t.prototype.getLookaheadFuncFor=function(t,e,n,r){var o=this.classLAFuncs.get(t);if(void 0===o){var i=this.getCurrRuleFullName(),a=this.getGAstProductions().get(i);return o=n.apply(null,[e,a,r,this.tokenMatcher,this.tokenClassIdentityFunc,this.tokenInstanceIdentityFunc,this.dynamicTokensEnabled]),this.classLAFuncs.put(t,o),o}return o},t.prototype.raiseEarlyExitException=function(t,e,n){var r=" but found: '"+l.getImage(this.LA(1))+"'";if(void 0===n){var o=this.getCurrRuleFullName(),i=this.getGAstProductions().get(o),s=h.getLookaheadPathsForOptionalProd(t,i,e,this.maxLookahead),c=s[0],u=p.map(c,function(t){return"["+p.map(t,function(t){return l.tokenLabel(t)}).join(",")+"]"});n="expecting at least one iteration which starts with one of these possible Token sequences::\n  "+("<"+u.join(" ,")+">")}else n="Expecting at least one "+n;throw this.SAVE_ERROR(new a.exceptions.EarlyExitException(n+r,this.LA(1)))},t.NO_RESYNC=!1,t.DEFER_DEFINITION_ERRORS_HANDLING=!1,t}();e.Parser=C,o.prototype=Error.prototype},function(t,e,n){"use strict";function r(t){return u(t,e.CLASS_TO_GRAMMAR_PRODUCTIONS)}function o(t){return u(t,e.CLASS_TO_RESYNC_FOLLOW_SETS)}function i(t,n){e.CLASS_TO_RESYNC_FOLLOW_SETS.put(t,n)}function a(t){return u(t,e.CLASS_TO_LOOKAHEAD_FUNCS)}function s(t){return u(t,e.CLASS_TO_FIRST_AFTER_REPETITION)}function c(t){return u(t,e.CLASS_TO_PRODUCTION_OVERRIDEN)}function u(t,e){var n=e.get(t);return void 0===n&&(e.put(t,new f.HashTable),n=e.get(t)),n}function p(){var e=l.filter(l.values(t.exports),function(t){return t instanceof f.HashTable});l.forEach(e,function(t){return t.clear()})}var f=n(3),l=n(4);e.CLASS_TO_DEFINITION_ERRORS=new f.HashTable,e.CLASS_TO_SELF_ANALYSIS_DONE=new f.HashTable,e.CLASS_TO_GRAMMAR_PRODUCTIONS=new f.HashTable,e.getProductionsForClass=r,e.CLASS_TO_RESYNC_FOLLOW_SETS=new f.HashTable,e.getResyncFollowsForClass=o,e.setResyncFollowsForClass=i,e.CLASS_TO_LOOKAHEAD_FUNCS=new f.HashTable,e.getLookaheadFuncsForClass=a,e.CLASS_TO_FIRST_AFTER_REPETITION=new f.HashTable,e.getFirstAfterRepForClass=s,e.CLASS_TO_PRODUCTION_OVERRIDEN=new f.HashTable,e.getProductionOverriddenForClass=c,e.MAX_OCCURRENCE_INDEX=5,e.clearCache=p},function(t,e,n){"use strict";function r(t){return o(t.constructor)}function o(t){var n=t.name;if(n)return n;var r=t[e.SPECIAL_NAME_CACHE_KEY];if(r)return r;var o=t.toString().match(c)[1];return i(t,o)||(t[e.SPECIAL_NAME_CACHE_KEY]=o),o}function i(t,e){var n=Object.getOwnPropertyDescriptor(t,u);return!(!s.isUndefined(n)&&!n.configurable)&&(Object.defineProperty(t,u,{enumerable:!1,configurable:!0,writable:!1,value:e}),!0)}var a=n(4),s=n(4);e.classNameFromInstance=r;var c=/^\s*function\s*(\S*)\s*\(/,u="name";e.SPECIAL_NAME_CACHE_KEY="CHEV_FUNC_NAME_CACHE666",e.functionName=o,e.defineNameProp=i;var p=function(){function t(){this._state={}}return t.prototype.keys=function(){return a.keys(this._state)},t.prototype.values=function(){return a.values(this._state)},t.prototype.put=function(t,e){this._state[t]=e},t.prototype.putAll=function(t){this._state=a.assign(this._state,t._state)},t.prototype.get=function(t){return this._state[t]},t.prototype.containsKey=function(t){return a.has(this._state,t)},t.prototype.clear=function(){this._state={}},t}();e.HashTable=p},function(t,e){"use strict";function n(t){return t&&0===t.length}function r(t){return Object.keys(t)}function o(t){for(var e=[],n=Object.keys(t),r=0;r<n.length;r++)e.push(t[n[r]]);return e}function i(t,e){for(var n=[],o=r(t),i=0;i<o.length;i++){var a=o[i];n.push(e.call(null,t[a],a))}return n}function a(t,e){for(var n=[],r=0;r<t.length;r++)n.push(e.call(null,t[r],r));return n}function s(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];Array.isArray(r)?e=e.concat(s(r)):e.push(r)}return e}function c(t){return n(t)?void 0:t[0]}function u(t){var e=t&&t.length;return e?t[e-1]:void 0}function p(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e.call(null,t[n],n);else{if(!P(t))throw Error("non exhaustive match");for(var o=r(t),n=0;n<o.length;n++){var i=o[n],a=t[i];e.call(null,a,i)}}}function f(t){return"string"==typeof t}function l(t){return void 0===t}function h(t){return t instanceof Function}function d(t,e){return void 0===e&&(e=1),t.slice(e,t.length)}function T(t,e){return void 0===e&&(e=1),t.slice(0,t.length-e)}function y(t,e){var n=[];if(Array.isArray(t))for(var r=0;r<t.length;r++){var o=t[r];e.call(null,o)&&n.push(o)}return n}function E(t,e){return y(t,function(t){return!e(t)})}function g(t,e){for(var n=Object.keys(t),r={},o=0;o<n.length;o++){var i=n[o],a=t[i];e(a)&&(r[i]=a)}return r}function m(t,e){return t.hasOwnProperty(e)}function v(t,e){return void 0!==A(t,function(t){return t===e})}function O(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e}function R(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function A(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(e.call(null,r))return r}}function I(t,e,n){for(var r=Array.isArray(t)?t:o(t),i=n,a=0;a<r.length;a++)i=e.call(null,i,r[a],a);return i}function N(t){return E(t,function(t){return null===t||void 0===t})}function k(t,e){void 0===e&&(e=function(t){return t});var n=[];return I(t,function(t,r){var o=e(r);return v(n,o)?t:(n.push(o),t.concat(r))},[])}function S(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=[null],o=r.concat(e);return Function.bind.apply(t,o)}function L(t){return Array.isArray(t)}function _(t){return t instanceof RegExp}function P(t){return t instanceof Object}function x(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0}function F(t,e){return E(t,function(t){return v(e,t)})}function M(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function C(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}function w(t,e){var n=O(t);return n.sort(function(t,n){return e(t)-e(n)}),n}function D(t,e){if(t.length!==e.length)throw Error("can't zipObject with different number of keys and values!");for(var n={},r=0;r<t.length;r++)n[t[r]]=e[r];return n}function b(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var o=0;o<e.length;o++)for(var i=e[o],a=r(i),s=0;s<a.length;s++){var c=a[s];t[c]=i[c]}return t}function U(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var o=0;o<e.length;o++)for(var i=e[o],a=r(i),s=0;s<a.length;s++){var c=a[s];m(t,c)||(t[c]=i[c])}return t}function z(t,e){var n={};return p(t,function(t){var r=e(t),o=n[r];o?o.push(t):n[r]=[t]}),n}function W(t,e){for(var n=R(t),o=r(e),i=0;i<o.length;i++){var a=o[i],s=e[a];n[a]=s}return n}function Y(){}function G(t){return Object.getPrototypeOf(t.prototype).constructor}e.isEmpty=n,e.keys=r,e.values=o,e.mapValues=i,e.map=a,e.flatten=s,e.first=c,e.last=u,e.forEach=p,e.isString=f,
e.isUndefined=l,e.isFunction=h,e.drop=d,e.dropRight=T,e.filter=y,e.reject=E,e.pick=g,e.has=m,e.contains=v,e.cloneArr=O,e.cloneObj=R,e.find=A,e.reduce=I,e.compact=N,e.uniq=k,e.partial=S,e.isArray=L,e.isRegExp=_,e.isObject=P,e.every=x,e.difference=F,e.some=M,e.indexOf=C,e.sortBy=w,e.zipObject=D,e.assign=b,e.assignNoOverwrite=U,e.groupBy=z,e.merge=W,e.NOOP=Y,e.getSuperClass=G},function(t,e,n){"use strict";var r,o=n(4);!function(t){function e(t){return o.contains(f,t.name)}function n(t,e){this.name=s,this.message=t,this.token=e,this.resyncedTokens=[]}function r(t,e){this.name=c,this.message=t,this.token=e,this.resyncedTokens=[]}function i(t,e){this.name=p,this.message=t,this.token=e,this.resyncedTokens=[]}function a(t,e){this.name=u,this.message=t,this.token=e,this.resyncedTokens=[]}var s="MismatchedTokenException",c="NoViableAltException",u="EarlyExitException",p="NotAllInputParsedException",f=[s,c,u,p];Object.freeze(f),t.isRecognitionException=e,t.MismatchedTokenException=n,n.prototype=Error.prototype,t.NoViableAltException=r,r.prototype=Error.prototype,t.NotAllInputParsedException=i,i.prototype=Error.prototype,t.EarlyExitException=a,a.prototype=Error.prototype}(r=e.exceptions||(e.exceptions={}))},function(t,e,n){"use strict";function r(t){var e=new c(t);return e.resolveRefs(),e.errors}var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1),a=n(7),s=n(4);e.resolveGrammar=r;var c=function(t){function e(e){t.call(this),this.nameToTopRule=e,this.errors=[]}return o(e,t),e.prototype.resolveRefs=function(){var t=this;s.forEach(this.nameToTopRule.values(),function(e){t.currTopLevel=e,e.accept(t)})},e.prototype.visitNonTerminal=function(t){var e=this.nameToTopRule.get(t.nonTerminalName);if(e)t.referencedRule=e;else{var n="Invalid grammar, reference to a rule which is not defined: ->"+t.nonTerminalName+"<-\ninside top level rule: ->"+this.currTopLevel.name+"<-";this.errors.push({message:n,type:i.ParserDefinitionErrorType.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:t.nonTerminalName})}},e}(a.gast.GAstVisitor);e.GastRefResolverVisitor=c},function(t,e,n){"use strict";var r,o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(4),a=n(8);!function(t){function e(t){return i.map(t,n)}function n(t){function e(t){return i.map(t,n)}if(t instanceof s)return{type:"NonTerminal",name:t.nonTerminalName,occurrenceInParent:t.occurrenceInParent};if(t instanceof u)return{type:"Flat",definition:e(t.definition)};if(t instanceof p)return{type:"Option",definition:e(t.definition)};if(t instanceof f)return{type:"RepetitionMandatory",definition:e(t.definition)};if(t instanceof l)return{type:"RepetitionMandatoryWithSeparator",separator:n(new y(t.separator)),definition:e(t.definition)};if(t instanceof d)return{type:"RepetitionWithSeparator",separator:n(new y(t.separator)),definition:e(t.definition)};if(t instanceof h)return{type:"Repetition",definition:e(t.definition)};if(t instanceof T)return{type:"Alternation",definition:e(t.definition)};if(t instanceof y){var r={type:"Terminal",name:a.tokenName(t.terminalType),label:a.tokenLabel(t.terminalType),occurrenceInParent:t.occurrenceInParent};return t.terminalType.PATTERN&&(r.pattern=t.terminalType.PATTERN.source),r}if(t instanceof c)return{type:"Rule",name:t.name,definition:e(t.definition)};throw Error("non exhaustive match")}var r=function(){function t(t){this.definition=t,this.implicitOccurrenceIndex=!1}return t.prototype.accept=function(t){t.visit(this),i.forEach(this.definition,function(e){e.accept(t)})},t}();t.AbstractProduction=r;var s=function(t){function e(e,n,r){void 0===n&&(n=void 0),void 0===r&&(r=1),t.call(this,[]),this.nonTerminalName=e,this.referencedRule=n,this.occurrenceInParent=r}return o(e,t),Object.defineProperty(e.prototype,"definition",{get:function(){return void 0!==this.referencedRule?this.referencedRule.definition:[]},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.accept=function(t){t.visit(this)},e}(r);t.NonTerminal=s;var c=function(t){function e(e,n,r){void 0===r&&(r=""),t.call(this,n),this.name=e,this.orgText=r}return o(e,t),e}(r);t.Rule=c;var u=function(t){function e(e){t.call(this,e)}return o(e,t),e}(r);t.Flat=u;var p=function(t){function e(e,n){void 0===n&&(n=1),t.call(this,e),this.occurrenceInParent=n}return o(e,t),e}(r);t.Option=p;var f=function(t){function e(e,n){void 0===n&&(n=1),t.call(this,e),this.occurrenceInParent=n}return o(e,t),e}(r);t.RepetitionMandatory=f;var l=function(t){function e(e,n,r){void 0===r&&(r=1),t.call(this,e),this.separator=n,this.occurrenceInParent=r}return o(e,t),e}(r);t.RepetitionMandatoryWithSeparator=l;var h=function(t){function e(e,n){void 0===n&&(n=1),t.call(this,e),this.occurrenceInParent=n}return o(e,t),e}(r);t.Repetition=h;var d=function(t){function e(e,n,r){void 0===r&&(r=1),t.call(this,e),this.separator=n,this.occurrenceInParent=r}return o(e,t),e}(r);t.RepetitionWithSeparator=d;var T=function(t){function e(e,n){void 0===n&&(n=1),t.call(this,e),this.occurrenceInParent=n}return o(e,t),e}(r);t.Alternation=T;var y=function(){function t(t,e){void 0===e&&(e=1),this.terminalType=t,this.occurrenceInParent=e,this.implicitOccurrenceIndex=!1}return t.prototype.accept=function(t){t.visit(this)},t}();t.Terminal=y;var E=function(){function t(){}return t.prototype.visit=function(t){if(t instanceof s)return this.visitNonTerminal(t);if(t instanceof u)return this.visitFlat(t);if(t instanceof p)return this.visitOption(t);if(t instanceof f)return this.visitRepetitionMandatory(t);if(t instanceof l)return this.visitRepetitionMandatoryWithSeparator(t);if(t instanceof d)return this.visitRepetitionWithSeparator(t);if(t instanceof h)return this.visitRepetition(t);if(t instanceof T)return this.visitAlternation(t);if(t instanceof y)return this.visitTerminal(t);if(t instanceof c)return this.visitRule(t);throw Error("non exhaustive match")},t.prototype.visitNonTerminal=function(t){},t.prototype.visitFlat=function(t){},t.prototype.visitOption=function(t){},t.prototype.visitRepetition=function(t){},t.prototype.visitRepetitionMandatory=function(t){},t.prototype.visitRepetitionMandatoryWithSeparator=function(t){},t.prototype.visitRepetitionWithSeparator=function(t){},t.prototype.visitAlternation=function(t){},t.prototype.visitTerminal=function(t){},t.prototype.visitRule=function(t){},t}();t.GAstVisitor=E,t.serializeGrammar=e,t.serializeProduction=n}(r=e.gast||(e.gast={}))},function(t,e,n){"use strict";function r(t){return o(t)?t.LABEL:i(t)}function o(t){return m.isString(t.LABEL)&&""!==t.LABEL}function i(t){return m.isString(t.tokenName)?t.tokenName:v.functionName(t)}function a(t,e,n){return void 0===e&&(e=void 0),void 0===n&&(n=I),c(t,e,n)}function s(t,e,n){return void 0===e&&(e=void 0),void 0===n&&(n=N),c(t,e,n)}function c(t,e,n){void 0===e&&(e=void 0),void 0===n&&(n=A);var r;m.isRegExp(e)||e===O.Lexer.SKIPPED||e===O.Lexer.NA?r=e:m.isFunction(e)&&(n=e,r=void 0);var o=function(){n.apply(this,arguments)};return v.defineNameProp(o,t)||(o.tokenName=t),o.prototype=Object.create(n.prototype),o.prototype.constructor=o,m.isUndefined(r)||(o.PATTERN=r),R.augmentTokenClasses([o]),o=m.assignNoOverwrite(o,n)}function u(t){return R.isInheritanceBasedToken(t)?t.image:R.getImageFromLazyToken(t)}function p(t){return t.startOffset}function f(t){return R.isInheritanceBasedToken(t)?t.startLine:R.getStartLineFromLazyToken(t)}function l(t){return R.isInheritanceBasedToken(t)?t.startColumn:R.getStartColumnFromLazyToken(t)}function h(t){return t.endOffset}function d(t){return R.isInheritanceBasedToken(t)?t.endLine:R.getEndLineFromLazyToken(t)}function T(t){return R.isInheritanceBasedToken(t)?t.endColumn:R.getEndColumnFromLazyToken(t)}function y(t){var e;return e=R.isInheritanceBasedToken(t)?t.constructor.tokenType:t.tokenType,R.tokenIdxToClass.get(e)}function E(t,e){if(I.prototype.isPrototypeOf(e.prototype)||A.prototype.isPrototypeOf(e.prototype))return R.tokenInstanceofMatcher(t,e);if(N.prototype.isPrototypeOf(e.prototype))return R.tokenStructuredMatcher(t,e);throw Error("non exhaustive match")}var g=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},m=n(4),v=n(3),O=n(9),R=n(11);e.tokenLabel=r,e.hasTokenLabel=o,e.tokenName=i,e.extendLazyToken=a,e.extendSimpleLazyToken=s,e.extendToken=c;var A=function(){function t(t,e,n,r,o,i){void 0===o&&(o=n),void 0===i&&(i=r+t.length-1),this.image=t,this.startOffset=e,this.startLine=n,this.startColumn=r,this.endLine=o,this.endColumn=i,this.isInsertedInRecovery=!1}return Object.defineProperty(t.prototype,"endOffset",{get:function(){return this.startOffset+this.image.length-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offset",{get:function(){return this.startOffset},set:function(t){this.startOffset=t},enumerable:!0,configurable:!0}),t.LABEL=void 0,t}();e.Token=A;var I=function(){function t(t,e,n){this.startOffset=t,this.endOffset=e,this.cacheData=n}return Object.defineProperty(t.prototype,"image",{get:function(){return R.getImageFromLazyToken(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startLine",{get:function(){return R.getStartLineFromLazyToken(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startColumn",{get:function(){return R.getStartColumnFromLazyToken(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endLine",{get:function(){return R.getEndLineFromLazyToken(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endColumn",{get:function(){return R.getEndColumnFromLazyToken(this)},enumerable:!0,configurable:!0}),t.LABEL=void 0,t}();e.LazyToken=I;var N=function(){function t(t,e,n,r){this.startOffset=t,this.endOffset=e,this.tokenType=n,this.cacheData=r}return t.LABEL=void 0,t}();e.SimpleLazyToken=N;var k=function(t){function e(){t.call(this,"",NaN,NaN,NaN,NaN,NaN)}return g(e,t),e}(A);e.VirtualToken=k;var S=function(t){function e(){t.apply(this,arguments)}return g(e,t),e}(k);e.EOF=S,R.augmentTokenClasses([S]),e.getImage=u,e.getStartOffset=p,e.getStartLine=f,e.getStartColumn=l,e.getEndOffset=h,e.getEndLine=d,e.getEndColumn=T,e.getTokenConstructor=y,e.tokenMatcher=E},function(t,e,n){"use strict";var r=n(8),o=n(10),i=n(4),a=n(11);!function(t){t[t.MISSING_PATTERN=0]="MISSING_PATTERN",t[t.INVALID_PATTERN=1]="INVALID_PATTERN",t[t.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",t[t.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",t[t.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",t[t.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",t[t.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",t[t.LEXER_DEFINITION_CANNOT_MIX_LAZY_AND_NOT_LAZY=11]="LEXER_DEFINITION_CANNOT_MIX_LAZY_AND_NOT_LAZY",t[t.LEXER_DEFINITION_CANNOT_MIX_SIMPLE_AND_NOT_SIMPLE=12]="LEXER_DEFINITION_CANNOT_MIX_SIMPLE_AND_NOT_SIMPLE"}(e.LexerDefinitionErrorType||(e.LexerDefinitionErrorType={}));var s=(e.LexerDefinitionErrorType,function(){function t(t,e){var n=this;void 0===e&&(e=!1),this.lexerDefinition=t,this.lexerDefinitionErrors=[],this.modes=[],this.allPatterns={},this.patternIdxToClass={},this.patternIdxToGroup={},this.patternIdxToLongerAltIdx={},this.patternIdxToCanLineTerminator={},this.patternIdxToPushMode={},this.patternIdxToPopMode={},this.emptyGroups={};var r;i.isArray(t)?(r={modes:{}},r.modes[o.DEFAULT_MODE]=i.cloneArr(t),r[o.DEFAULT_MODE]=o.DEFAULT_MODE):r=i.cloneObj(t),this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(o.performRuntimeChecks(r)),r.modes=r.modes?r.modes:{},i.forEach(r.modes,function(t,e){r.modes[e]=i.reject(t,function(t){return i.isUndefined(t)})});var s=i.keys(r.modes);i.forEach(r.modes,function(t,e){if(n.modes.push(e),n.lexerDefinitionErrors=n.lexerDefinitionErrors.concat(o.validatePatterns(t,s)),i.isEmpty(n.lexerDefinitionErrors)){a.augmentTokenClasses(t);var r=o.analyzeTokenClasses(t);n.allPatterns[e]=r.allPatterns,n.patternIdxToClass[e]=r.patternIdxToClass,n.patternIdxToGroup[e]=r.patternIdxToGroup,n.patternIdxToLongerAltIdx[e]=r.patternIdxToLongerAltIdx,n.patternIdxToCanLineTerminator[e]=r.patternIdxToCanLineTerminator,n.patternIdxToPushMode[e]=r.patternIdxToPushMode,n.patternIdxToPopMode[e]=r.patternIdxToPopMode,n.emptyGroups=i.merge(n.emptyGroups,r.emptyGroups)}}),this.defaultMode=r.defaultMode;var c=i.flatten(i.mapValues(r.modes,function(t){return t})),u=o.checkLazyMode(c);this.isLazyTokenMode=u.isLazy,this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(u.errors);var p=o.checkSimpleMode(c);if(this.isSimpleTokenMode=p.isSimple,this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(p.errors),!i.isEmpty(this.lexerDefinitionErrors)&&!e){var f=i.map(this.lexerDefinitionErrors,function(t){return t.message}),l=f.join("-----------------------\n");throw new Error("Errors detected in definition of Lexer:\n"+l)}}return t.prototype.tokenize=function(t,e){if(void 0===e&&(e=this.defaultMode),!i.isEmpty(this.lexerDefinitionErrors)){var n=i.map(this.lexerDefinitionErrors,function(t){return t.message}),r=n.join("-----------------------\n");throw new Error("Unable to Tokenize because Errors detected in definition of Lexer:\n"+r)}return this.isLazyTokenMode?this.isSimpleTokenMode?this.tokenizeInternalLazy(t,e,a.createSimpleLazyToken):this.tokenizeInternalLazy(t,e,a.createLazyTokenInstance):this.tokenizeInternal(t,e)},t.prototype.tokenizeInternal=function(t,e){function n(t){z.push(t),x=this.allPatterns[t],F=x.length,M=this.patternIdxToLongerAltIdx[t],C=this.patternIdxToGroup[t],w=this.patternIdxToClass[t],D=this.patternIdxToCanLineTerminator[t],b=this.patternIdxToPushMode[t],U=this.patternIdxToPopMode[t]}var a,s,c,u,p,f,l,h,d,T,y,E,g,m,v,O,R,A=this,I=t,N=0,k=[],S=[],L=1,_=1,P=o.cloneEmptyGroups(this.emptyGroups),x=[],F=0,M=[],C=[],w=[],D=[],b=[],U=[],z=[],W=function(t){if(1===z.length){var e="Unable to pop Lexer Mode after encountering Token ->"+r.getImage(t)+"<- The Mode Stack is empty";S.push({line:r.getStartLine(t),column:r.getStartColumn(t),length:r.getImage(t).length,message:e})}else{z.pop();var n=i.last(z);x=A.allPatterns[n],F=x.length,M=A.patternIdxToLongerAltIdx[n],C=A.patternIdxToGroup[n],w=A.patternIdxToClass[n],D=A.patternIdxToCanLineTerminator[n],b=A.patternIdxToPushMode[n],U=A.patternIdxToPopMode[n]}};for(n.call(this,e);t.length>0;){for(a=null,s=0;s<F;s++)if(a=x[s].exec(t),null!==a){p=M[s],p&&(u=x[p].exec(t),u&&u[0].length>a[0].length&&(a=u,s=p));break}if(null!==a){if(f=a[0],l=f.length,h=C[s],void 0!==h&&(d=w[s],T=new d(f,N,L,_),"default"===h?k.push(T):P[h].push(T)),t=t.slice(l),N+=l,_+=l,D[s]){var Y=o.countLineTerminators(f);if(0!==Y){for(L+=Y,v=l-1;v>=0&&(g=f.charCodeAt(v),13!==g&&10!==g);)v--;_=l-v,void 0!==h&&(R=v===l-1,E=R?-1:0,1===Y&&R||(T.endLine=L+E,T.endColumn=_-1+-E))}}U[s]&&W(T),b[s]&&n.call(this,b[s])}else{for(var G=N,K=L,j=_,V=!1;!V&&t.length>0;)for(m=t.charCodeAt(0),10===m||13===m&&(1===t.length||t.length>1&&10!==t.charCodeAt(1))?(L++,_=1):_++,t=t.substr(1),N++,c=0;c<x.length&&!(V=x[c].test(t));c++);y=N-G,O="unexpected character: ->"+I.charAt(G)+"<- at offset: "+G+","+(" skipped "+(N-G)+" characters."),S.push({line:K,column:j,length:y,message:O})}}return{tokens:k,groups:P,errors:S}},t.prototype.tokenizeInternalLazy=function(t,e,n){function s(t){w.push(t),S=this.allPatterns[t],L=S.length,_=this.patternIdxToLongerAltIdx[t],P=this.patternIdxToGroup[t],x=this.patternIdxToClass[t],F=this.patternIdxToPushMode[t],M=this.patternIdxToPopMode[t]}var c,u,p,f,l,h,d,T,y,E,g,m,v,O=this,R=t,A=0,I=[],N=[],k=o.cloneEmptyGroups(this.emptyGroups),S=[],L=0,_=[],P=[],x=[],F=[],M=[],C={orgText:t,lineToOffset:[]},w=[],D=function(t){if(1===w.length){var e="Unable to pop Lexer Mode after encountering Token ->"+r.getImage(t)+"<- The Mode Stack is empty";N.push({line:r.getStartLine(t),column:r.getStartColumn(t),length:r.getImage(t).length,message:e})}else{w.pop();var n=i.last(w);S=O.allPatterns[n],L=S.length,_=O.patternIdxToLongerAltIdx[n],P=O.patternIdxToGroup[n],x=O.patternIdxToClass[n],F=O.patternIdxToPushMode[n],M=O.patternIdxToPopMode[n]}};for(s.call(this,e);t.length>0;){for(c=null,u=0;u<L;u++)if(c=S[u].exec(t),null!==c){l=_[u],l&&(f=S[l].exec(t),f&&f[0].length>c[0].length&&(c=f,u=l));break}if(null!==c)h=c[0],d=h.length,T=P[u],void 0!==T&&(y=x[u],E=n(A,A+d-1,y,C),"default"===T?I.push(E):k[T].push(E)),t=t.slice(d),A+=d,M[u]&&D(E),F[u]&&s.call(this,F[u]);else{for(var b=A,U=!1;!U&&t.length>0;)for(m=t.charCodeAt(0),t=t.substr(1),A++,p=0;p<S.length&&!(U=S[p].test(t));p++);g=A-b,v="unexpected character: ->"+R.charAt(b)+"<- at offset: "+b+","+(" skipped "+(A-b)+" characters."),i.isEmpty(C.lineToOffset)&&a.fillUpLineToOffset(C.lineToOffset,C.orgText);var z=a.getStartLineFromLineToOffset(b,C.lineToOffset),W=a.getStartColumnFromLineToOffset(b,C.lineToOffset);N.push({line:z,column:W,length:g,message:v})}}return{tokens:I,groups:k,errors:N}},t.SKIPPED={description:"This marks a skipped Token pattern, this means each token identified by it willbe consumed and then throw into oblivion, this can be used to for example: skip whitespace."},t.NA=/NOT_APPLICABLE/,t}());e.Lexer=s},function(t,e,n){"use strict";function r(t){var e=v.reject(t,function(t){return t[R]===m.Lexer.NA}),n=v.map(e,function(t){return l(t[R])}),r=v.zipObject(n,e),o=v.map(n,function(t){return r[t.toString()]}),i=v.map(e,function(t){var e=t.GROUP;if(e!==m.Lexer.SKIPPED){if(v.isString(e))return e;if(v.isUndefined(e))return"default";throw Error("non exhaustive match")}}),a=v.map(e,function(t){var n=t.LONGER_ALT;if(n){var r=v.indexOf(e,n);return r}}),s=v.map(e,function(t){return t.PUSH_MODE}),c=v.map(e,function(t){return v.has(t,"POP_MODE")}),u=v.map(n,function(t){return/\\n|\\r|\\s/g.test(t.source)}),p=v.reduce(e,function(t,e){var n=e.GROUP;return v.isString(n)&&(t[n]=[]),t},{});return{allPatterns:n,patternIdxToClass:o,patternIdxToGroup:i,patternIdxToLongerAltIdx:a,patternIdxToCanLineTerminator:u,patternIdxToPushMode:s,patternIdxToPopMode:c,emptyGroups:p}}function o(t,e){var n=[],r=i(t),o=r.valid;n=n.concat(r.errors);var l=a(o);return o=l.valid,n=n.concat(l.errors),n=n.concat(s(o)),n=n.concat(c(o)),n=n.concat(u(o)),n=n.concat(p(o)),n=n.concat(f(o,e))}function i(t){var e=v.filter(t,function(t){return!v.has(t,R)}),n=v.map(e,function(t){return{message:"Token class: ->"+g.tokenName(t)+"<- missing static 'PATTERN' property",type:m.LexerDefinitionErrorType.MISSING_PATTERN,tokenClasses:[t]}}),r=v.difference(t,e);return{errors:n,valid:r}}function a(t){var e=v.filter(t,function(t){var e=t[R];return!v.isRegExp(e)}),n=v.map(e,function(t){return{message:"Token class: ->"+g.tokenName(t)+"<- static 'PATTERN' can only be a RegExp",type:m.LexerDefinitionErrorType.INVALID_PATTERN,tokenClasses:[t]}}),r=v.difference(t,e);return{errors:n,valid:r}}function s(t){var e=v.filter(t,function(t){var e=t[R];return A.test(e.source)}),n=v.map(e,function(t){return{message:"Token class: ->"+g.tokenName(t)+"<- static 'PATTERN' cannot contain end of input anchor '$'",type:m.LexerDefinitionErrorType.EOI_ANCHOR_FOUND,tokenClasses:[t]}});return n}function c(t){var e=v.filter(t,function(t){var e=t[R];return e instanceof RegExp&&(e.multiline||e.global)}),n=v.map(e,function(t){return{message:"Token class: ->"+g.tokenName(t)+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:m.LexerDefinitionErrorType.UNSUPPORTED_FLAGS_FOUND,tokenClasses:[t]}});return n}function u(t){var e=[],n=v.map(t,function(n){return v.reduce(t,function(t,r){return n.PATTERN.source!==r.PATTERN.source||v.contains(e,r)||r.PATTERN===m.Lexer.NA?t:(e.push(r),t.push(r),t)},[])});n=v.compact(n);var r=v.filter(n,function(t){return t.length>1}),o=v.map(r,function(t){var e=v.map(t,function(t){return g.tokenName(t)}),n=v.first(t).PATTERN;return{message:"The same RegExp pattern ->"+n+"<-"+("has been used in all the following classes: "+e.join(", ")+" <-"),type:m.LexerDefinitionErrorType.DUPLICATE_PATTERNS_FOUND,tokenClasses:t}});return o}function p(t){var e=v.filter(t,function(t){if(!v.has(t,"GROUP"))return!1;var e=t.GROUP;return e!==m.Lexer.SKIPPED&&e!==m.Lexer.NA&&!v.isString(e)}),n=v.map(e,function(t){return{message:"Token class: ->"+g.tokenName(t)+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:m.LexerDefinitionErrorType.INVALID_GROUP_TYPE_FOUND,tokenClasses:[t]}});return n}function f(t,e){var n=v.filter(t,function(t){return void 0!==t.PUSH_MODE&&!v.contains(e,t.PUSH_MODE)}),r=v.map(n,function(t){var e="Token class: ->"+g.tokenName(t)+"<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->"+t.PUSH_MODE+"<-which does not exist";return{message:e,type:m.LexerDefinitionErrorType.PUSH_MODE_DOES_NOT_EXIST,tokenClasses:[t]}});return r}function l(t){var e=t.ignoreCase?"i":"";return new RegExp("^(?:"+t.source+")",e)}function h(t){for(var e=0,n=0;n<t.length;){var r=t.charCodeAt(n);10===r?e++:13===r&&(n!==t.length-1&&10===t.charCodeAt(n+1)||e++),n++}return e}function d(t){var n=[];return v.has(t,e.DEFAULT_MODE)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+e.DEFAULT_MODE+"> property in its definition\n",type:m.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),v.has(t,e.MODES)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+e.MODES+"> property in its definition\n",type:m.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),v.has(t,e.MODES)&&v.has(t,e.DEFAULT_MODE)&&!v.has(t.modes,t.defaultMode)&&n.push({message:"A MultiMode Lexer cannot be initialized with a "+e.DEFAULT_MODE+": <"+t.defaultMode+">which does not exist\n",type:m.LexerDefinitionErrorType.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),v.has(t,e.MODES)&&v.forEach(t.modes,function(t,e){v.forEach(t,function(t,r){v.isUndefined(t)&&n.push({message:"A Lexer cannot be initialized using an undefined Token Class. Mode:"+("<"+e+"> at index: <"+r+">\n"),type:m.LexerDefinitionErrorType.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED})})}),n}function T(t){var e=[],n=v.uniq(t,function(t){return g.tokenName(t)}),r=v.every(n,function(t){return O.isLazyTokenType(t)}),o=v.every(n,function(t){return!O.isLazyTokenType(t)});if(!r&&!o){var i=v.filter(n,function(t){return O.isLazyTokenType(t)}),a=v.map(i,g.tokenName),s=a.join("\n\t"),c=v.filter(n,function(t){return!O.isLazyTokenType(t)}),u=v.map(c,g.tokenName),p=u.join("\n\t");e.push({message:"A Lexer cannot be defined using a mix of both Lazy and Non-Lazy Tokens:\nLazy Tokens:\n\t"+s+"\nNon-Lazy Tokens:\n\t"+p,type:m.LexerDefinitionErrorType.LEXER_DEFINITION_CANNOT_MIX_LAZY_AND_NOT_LAZY})}return{isLazy:r,errors:e}}function y(t){var e=[],n=v.uniq(t,function(t){return g.tokenName(t)}),r=v.every(n,function(t){return O.isSimpleTokenType(t)}),o=v.every(n,function(t){return!O.isSimpleTokenType(t)});if(!r&&!o){var i=v.filter(n,function(t){return O.isSimpleTokenType(t)}),a=v.map(i,g.tokenName),s=a.join("\n\t"),c=v.filter(n,function(t){return!O.isSimpleTokenType(t)}),u=v.map(c,g.tokenName),p=u.join("\n\t");e.push({message:"A Lexer cannot be defined using a mix of both Simple and Non-Simple Tokens:\nSimple Tokens:\n\t"+s+"\nNon-Simple Tokens:\n\t"+p,type:m.LexerDefinitionErrorType.LEXER_DEFINITION_CANNOT_MIX_SIMPLE_AND_NOT_SIMPLE})}return{isSimple:r,errors:e}}function E(t){var e={},n=v.keys(t);return v.forEach(n,function(n){var r=t[n];if(!v.isArray(r))throw Error("non exhaustive match");e[n]=[]}),e}var g=n(8),m=n(9),v=n(4),O=n(11),R="PATTERN";e.DEFAULT_MODE="defaultMode",e.MODES="modes",e.analyzeTokenClasses=r,e.validatePatterns=o,e.findMissingPatterns=i,e.findInvalidPatterns=a;var A=/[^\\][\$]/;e.findEndOfInputAnchor=s,e.findUnsupportedFlags=c,e.findDuplicatePatterns=u,e.findInvalidGroupType=p,e.findModesThatDoNotExist=f,e.addStartOfInput=l,e.countLineTerminators=h,e.performRuntimeChecks=d,e.checkLazyMode=T,e.checkSimpleMode=y,e.cloneEmptyGroups=E},function(t,e,n){"use strict";function r(t,e){var n=0,r=0;for(t.push(0);r<e.length;){var o=e.charCodeAt(r);10===o?(n++,t.push(r+1)):13===o&&(r!==e.length-1&&10===e.charCodeAt(r+1)?(t.push(r+2),r++):(n++,t.push(r+1))),r++}t.push(1/0)}function o(t,e){return c(t,e)}function i(t,e){return c(t,e)}function a(t,e){return u(t,e)}function s(t,e){return u(t,e)}function c(t,e){for(var n=0,r=e.length-1,o=!1,i=-1;!o;){var a=Math.floor((r+n)/2),s=e[a],c=e[a+1];if(s<=t&&c>t)o=!0,i=a;else if(s>t)r=a;else if(c<t)n=a;else{if(c!==t)throw Error("non exhaustive match");o=!0,i=a+1}}return i+1}function u(t,e){var n=c(t,e);return t-e[n-1]+1}function p(t,e){if(t.tokenType===e.tokenType)return!0;if(e.extendingTokenTypes.length>0){for(var n=e.extendingTokenTypes,r=n.length,o=0;o<r;o++)if(n[o]===t.tokenType)return!0;return!1}return!1}function f(t,e){return t instanceof e}function l(t){return t.tokenType}function h(t){return t.constructor.tokenType}function d(t){return t.tokenType}function T(t){return y(t)||t===Object}function y(t){return t===w.Token||t===w.LazyToken||t===w.SimpleLazyToken}function E(t){var e=g(t);m(e),v(e)}function g(t){var e=C.cloneArr(t);return C.forEach(t,function(t){for(var n=C.getSuperClass(t);!T(n);)C.contains(e,n)||e.push(n),n=C.getSuperClass(n)}),e}function m(t){C.forEach(t,function(t){O(t)||(e.tokenIdxToClass.put(e.tokenShortNameIdx,t),t.tokenType=e.tokenShortNameIdx++),R(t)||(t.extendingTokenTypes=[])})}function v(t){C.forEach(t,function(t){for(var e=[t.tokenType],n=C.getSuperClass(t);!y(n)&&n!==Object;){var r=C.difference(e,n.extendingTokenTypes);n.extendingTokenTypes=n.extendingTokenTypes.concat(r),e.push(n.tokenType),n=C.getSuperClass(n)}})}function O(t){return C.has(t,"tokenType")}function R(t){return C.has(t,"extendingTokenTypes")}function A(t,e,n,r){return{startOffset:t,endOffset:e,tokenType:n.tokenType,cacheData:r}}function I(t,e,n,r){return new n(t,e,r)}function N(t){return t instanceof w.Token||t instanceof w.LazyToken}function k(t){return t.isInsertedInRecovery?"":t.cacheData.orgText.substring(t.startOffset,t.endOffset+1)}function S(t){return t.isInsertedInRecovery?NaN:(x(t.cacheData),o(t.startOffset,t.cacheData.lineToOffset))}function L(t){return t.isInsertedInRecovery?NaN:(x(t.cacheData),a(t.startOffset,t.cacheData.lineToOffset))}function _(t){return t.isInsertedInRecovery?NaN:(x(t.cacheData),i(t.endOffset,t.cacheData.lineToOffset))}function P(t){return t.isInsertedInRecovery?NaN:(x(t.cacheData),s(t.endOffset,t.cacheData.lineToOffset))}function x(t){C.isEmpty(t.lineToOffset)&&r(t.lineToOffset,t.orgText)}function F(t){return w.LazyToken.prototype.isPrototypeOf(t.prototype)||w.SimpleLazyToken.prototype.isPrototypeOf(t.prototype)}function M(t){return w.SimpleLazyToken.prototype.isPrototypeOf(t.prototype)}var C=n(4),w=n(8),D=n(3);e.fillUpLineToOffset=r,e.getStartLineFromLineToOffset=o,e.getEndLineFromLineToOffset=i,e.getStartColumnFromLineToOffset=a,e.getEndColumnFromLineToOffset=s,e.tokenStructuredMatcher=p,e.tokenInstanceofMatcher=f,e.tokenClassIdentity=l,e.tokenInstanceIdentity=h,e.tokenStructuredIdentity=d,e.isBaseTokenOrObject=T,e.isBaseTokenClass=y,e.tokenShortNameIdx=1,e.tokenIdxToClass=new D.HashTable,e.augmentTokenClasses=E,e.expandTokenHierarchy=g,e.assignTokenDefaultProps=m,e.assignExtendingTokensProp=v,e.hasShortKeyProperty=O,e.hasExtendingTokensTypesProperty=R,e.createSimpleLazyToken=A,e.createLazyTokenInstance=I,e.isInheritanceBasedToken=N,e.getImageFromLazyToken=k,e.getStartLineFromLazyToken=S,e.getStartColumnFromLazyToken=L,e.getEndLineFromLazyToken=_,e.getEndColumnFromLazyToken=P,e.ensureLineDataProcessing=x,e.isLazyTokenType=F,e.isSimpleTokenType=M},function(t,e,n){"use strict";function r(t,e,n){var r=E.map(t,o),i=E.map(t,function(t){return f(t,t)}),a=g.map(t,h),s=g.map(t,function(t){return d(t,e,n)});return E.flatten(r.concat(i,a,s))}function o(t){var e=new N;t.accept(e);var n=e.allProductions,r=E.groupBy(n,a),o=E.pick(r,function(t){return t.length>1}),c=E.map(E.values(o),function(e){var n=E.first(e),r=i(e,t.name),o=O.getProductionDslName(n),a={message:r,type:m.ParserDefinitionErrorType.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:o,occurrence:n.occurrenceInParent},c=s(n);return c&&(a.parameter=c),a});return c}function i(t,e){var n=E.first(t),r=n.occurrenceInParent,o=O.getProductionDslName(n),i=s(n),a="->"+o+"<- with occurrence index: ->"+r+"<-\n                  "+(i?"and argument: "+i:"")+"\n                  appears more than once ("+t.length+" times) in the top level rule: "+e+".\n                  "+(1===r?"note that "+o+" and "+o+"1 both have the same occurrence index 1}":"")+"}\n                  to fix this make sure each usage of "+o+" "+(i?"with the argument: "+i:"")+"\n                  in the rule "+e+" has a different occurrence index (1-5), as that combination acts as a unique\n                  position key in the grammar, which is needed by the parsing engine.";return a=a.replace(/[ \t]+/g," "),a=a.replace(/\s\s+/g,"\n")}function a(t){return O.getProductionDslName(t)+"_#_"+t.occurrenceInParent+"_#_"+s(t)}function s(t){return t instanceof v.gast.Terminal?R.tokenName(t.terminalType):t instanceof v.gast.NonTerminal?t.nonTerminalName:""}function c(t,e){var n,r=[];return t.match(k)||(n="Invalid Grammar rule name: ->"+t+"<- it must match the pattern: ->"+k.toString()+"<-",r.push({message:n,type:m.ParserDefinitionErrorType.INVALID_RULE_NAME,ruleName:t})),r}function u(t,e,n){var r,o=[];return E.contains(e,t)&&(r="Duplicate definition, rule: ->"+t+"<- is already defined in the grammar: ->"+n+"<-",o.push({message:r,type:m.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:t})),o}function p(t,e,n){var r,o=[];return E.contains(e,t)||(r="Invalid rule override, rule: ->"+t+"<- cannot be overridden in the grammar: ->"+n+"<-as it is not defined in any of the super grammars ",o.push({message:r,type:m.ParserDefinitionErrorType.INVALID_RULE_OVERRIDE,ruleName:t})),o}function f(t,e,n){void 0===n&&(n=[]);var r=[],o=l(e.definition);if(E.isEmpty(o))return[];var i=t.name,a=E.contains(o,t),s=E.map(n,function(t){return t.name}),c=i+" --> "+s.concat([i]).join(" --> ");if(a){var u="Left Recursion found in grammar.\n"+("rule: <"+i+"> can be invoked from itself (directly or indirectly)\n")+("without consuming any Tokens. The grammar path that causes this is: \n "+c+"\n")+" To fix this refactor your grammar to remove the left recursion.\nsee: https://en.wikipedia.org/wiki/LL_parser#Left_Factoring.";r.push({message:u,type:m.ParserDefinitionErrorType.LEFT_RECURSION,ruleName:i})}var p=E.difference(o,n.concat([t])),h=E.map(p,function(e){var r=E.cloneArr(n);return r.push(e),f(t,e,r)});return r.concat(E.flatten(h))}function l(t){var e=[];if(E.isEmpty(t))return e;var n=E.first(t);if(n instanceof v.gast.NonTerminal)e.push(n.referencedRule);else if(n instanceof v.gast.Flat||n instanceof v.gast.Option||n instanceof v.gast.RepetitionMandatory||n instanceof v.gast.RepetitionMandatoryWithSeparator||n instanceof v.gast.RepetitionWithSeparator||n instanceof v.gast.Repetition)e=e.concat(l(n.definition));else if(n instanceof v.gast.Alternation)e=E.flatten(E.map(n.definition,function(t){return l(t.definition)}));else if(!(n instanceof v.gast.Terminal))throw Error("non exhaustive match");var r=O.isOptionalProd(n),o=t.length>1;if(r&&o){var i=E.drop(t);return e.concat(l(i))}return e}function h(t){var e=new S;t.accept(e);var n=e.alternations,r=E.reduce(n,function(e,n){var r=E.dropRight(n.definition),o=E.map(r,function(e,r){return E.isEmpty(A.first(e))?{message:"Ambiguous empty alternative: <"+(r+1)+">"+(" in <OR"+n.occurrenceInParent+"> inside <"+t.name+"> Rule.\n")+"Only the last alternative may be an empty alternative.",
type:m.ParserDefinitionErrorType.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:n.occurrenceInParent,alternative:r+1}:null});return e.concat(E.compact(o))},[]);return r}function d(t,e,n){var r=new S;t.accept(r);var o=r.alternations,i=n[t.name];i&&(o=g.reject(o,function(t){return i[O.getProductionDslName(t)+t.occurrenceInParent]}));var a=E.reduce(o,function(n,r){var o=r.occurrenceInParent,i=I.getLookaheadPathsForOr(o,t,e),a=T(i),s=E.map(a,function(e){var n=g.map(e.alts,function(t){return t+1}),i=g.map(e.path,function(t){return R.tokenLabel(t)}).join(", "),a="Ambiguous alternatives: <"+n.join(" ,")+"> in <OR"+o+">"+(" inside <"+t.name+"> Rule,\n")+("<"+i+"> may appears as a prefix path in all these alternatives.\n");return a+="To Resolve this, try one of of the following: \n1. Refactor your grammar to be LL(K) for the current value of k (by default k=5)\n2. Increase the value of K for your grammar by providing a larger 'maxLookahead' value in the parser's config\n3. This issue can be ignored (if you know what you are doing...), see http://sap.github.io/chevrotain/documentation/0_9_0/interfaces/iparserconfig.html for\n",{message:a,type:m.ParserDefinitionErrorType.AMBIGUOUS_ALTS,ruleName:t.name,occurrence:r.occurrenceInParent,alternatives:[e.alts]}});return n.concat(s)},[]);return a}function T(t){var e=[],n=g.reduce(t,function(n,r,o){return g.forEach(r,function(r){var i=[o];g.forEach(t,function(t,e){o!==e&&I.containsPath(t,r)&&i.push(e)}),i.length>1&&!I.containsPath(e,r)&&(e.push(r),n.push({alts:i,path:r}))}),n},[]);return n}var y=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},E=n(4),g=n(4),m=n(1),v=n(7),O=n(13),R=n(8),A=n(14),I=n(15);e.validateGrammar=r,e.identifyProductionForDuplicates=a;var N=function(t){function e(){t.apply(this,arguments),this.allProductions=[]}return y(e,t),e.prototype.visitNonTerminal=function(t){this.allProductions.push(t)},e.prototype.visitOption=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionWithSeparator=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionMandatory=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.allProductions.push(t)},e.prototype.visitRepetition=function(t){this.allProductions.push(t)},e.prototype.visitAlternation=function(t){this.allProductions.push(t)},e.prototype.visitTerminal=function(t){this.allProductions.push(t)},e}(v.gast.GAstVisitor);e.OccurrenceValidationCollector=N;var k=/^[a-zA-Z_]\w*$/;e.validateRuleName=c,e.validateRuleDoesNotAlreadyExist=u,e.validateRuleIsOverridden=p,e.validateNoLeftRecursion=f,e.getFirstNoneTerminal=l;var S=function(t){function e(){t.apply(this,arguments),this.alternations=[]}return y(e,t),e.prototype.visitAlternation=function(t){this.alternations.push(t)},e}(v.gast.GAstVisitor);e.validateEmptyOrAlternative=h,e.validateAmbiguousAlternationAlternatives=d},function(t,e,n){"use strict";function r(t){return t instanceof u.gast.Flat||t instanceof u.gast.Option||t instanceof u.gast.Repetition||t instanceof u.gast.RepetitionMandatory||t instanceof u.gast.RepetitionMandatoryWithSeparator||t instanceof u.gast.RepetitionWithSeparator||t instanceof u.gast.Terminal||t instanceof u.gast.Rule}function o(t,e){void 0===e&&(e=[]);var n=t instanceof u.gast.Option||t instanceof u.gast.Repetition||t instanceof u.gast.RepetitionWithSeparator;return!!n||(t instanceof u.gast.Alternation?p.some(t.definition,function(t){return o(t,e)}):!(t instanceof u.gast.NonTerminal&&p.contains(e,t))&&(t instanceof u.gast.AbstractProduction&&(t instanceof u.gast.NonTerminal&&e.push(t),p.every(t.definition,function(t){return o(t,e)}))))}function i(t){return t instanceof u.gast.Alternation}function a(t){if(t instanceof u.gast.NonTerminal)return"SUBRULE";if(t instanceof u.gast.Option)return"OPTION";if(t instanceof u.gast.Alternation)return"OR";if(t instanceof u.gast.RepetitionMandatory)return"AT_LEAST_ONE";if(t instanceof u.gast.RepetitionMandatoryWithSeparator)return"AT_LEAST_ONE_SEP";if(t instanceof u.gast.RepetitionWithSeparator)return"MANY_SEP";if(t instanceof u.gast.Repetition)return"MANY";if(t instanceof u.gast.Terminal)return"CONSUME";throw Error("non exhaustive match")}function s(t){var e=new f;return e.visit(t)}var c=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},u=n(7),p=n(4);e.isSequenceProd=r,e.isOptionalProd=o,e.isBranchingProd=i,e.getProductionDslName=a;var f=function(t){function e(){t.apply(this,arguments)}return c(e,t),e.prototype.visitNonTerminal=function(t){return new u.gast.NonTerminal(t.nonTerminalName,void 0,t.occurrenceInParent)},e.prototype.visitFlat=function(t){var e=this,n=p.map(t.definition,function(t){return e.visit(t)});return new u.gast.Flat(n)},e.prototype.visitOption=function(t){var e=this,n=p.map(t.definition,function(t){return e.visit(t)});return new u.gast.Option(n,t.occurrenceInParent)},e.prototype.visitRepetition=function(t){var e=this,n=p.map(t.definition,function(t){return e.visit(t)});return new u.gast.Repetition(n,t.occurrenceInParent)},e.prototype.visitRepetitionMandatory=function(t){var e=this,n=p.map(t.definition,function(t){return e.visit(t)});return new u.gast.RepetitionMandatory(n,t.occurrenceInParent)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){var e=this,n=p.map(t.definition,function(t){return e.visit(t)});return new u.gast.RepetitionMandatoryWithSeparator(n,t.separator,t.occurrenceInParent)},e.prototype.visitRepetitionWithSeparator=function(t){var e=this,n=p.map(t.definition,function(t){return e.visit(t)});return new u.gast.RepetitionWithSeparator(n,t.separator,t.occurrenceInParent)},e.prototype.visitAlternation=function(t){var e=this,n=p.map(t.definition,function(t){return e.visit(t)});return new u.gast.Alternation(n,t.occurrenceInParent)},e.prototype.visitTerminal=function(t){return new u.gast.Terminal(t.terminalType,t.occurrenceInParent)},e.prototype.visitRule=function(t){var e=this,n=p.map(t.definition,function(t){return e.visit(t)});return new u.gast.Rule(t.name,n,t.orgText)},e}(u.gast.GAstVisitor);e.cloneProduction=s},function(t,e,n){"use strict";function r(t){if(t instanceof s.gast.NonTerminal)return r(t.referencedRule);if(t instanceof s.gast.Terminal)return a(t);if(c.isSequenceProd(t))return o(t);if(c.isBranchingProd(t))return i(t);throw Error("non exhaustive match")}function o(t){for(var e,n=[],o=t.definition,i=0,a=o.length>i,s=!0;a&&s;)e=o[i],s=c.isOptionalProd(e),n=n.concat(r(e)),i+=1,a=o.length>i;return u.uniq(n)}function i(t){var e=u.map(t.definition,function(t){return r(t)});return u.uniq(u.flatten(e))}function a(t){return[t.terminalType]}var s=n(7),c=n(13),u=n(4);e.first=r,e.firstForSequence=o,e.firstForBranching=i,e.firstForTerminal=a},function(t,e,n){"use strict";function r(t,e,n,r,o,i,a,s){var c=h(t,e,n);return p(c,r,o,i,a,s)}function o(t,e,n,r,o,i,a,s){var c=d(t,e,n,r);return f(c[0],o,i,a,s)}function i(t,e,n,r,i,a,s){return o(t,e,O.OPTION,n,r,i,a,s)}function a(t,e,n,r,i,a,s){return o(t,e,O.REPETITION,n,r,i,a,s)}function s(t,e,n,r,i,a,s){return o(t,e,O.REPETITION_WITH_SEPARATOR,n,r,i,a,s)}function c(t,e,n,r,i,a,s){return o(t,e,O.REPETITION_MANDATORY,n,r,i,a,s)}function u(t,e,n,r,i,a,s){return o(t,e,O.REPETITION_MANDATORY_WITH_SEPARATOR,n,r,i,a,s)}function p(t,e,n,r,o,i){var a=t.length,s=E.every(t,function(t){return E.every(t,function(t){return 1===t.length})});if(e)return function(e){for(var r=E.map(e,function(t){return t.GATE}),o=0;o<a;o++){var i=t[o],s=i.length,c=r[o];if(!c||c.call(this))t:for(var u=0;u<s;u++){for(var p=i[u],f=p.length,l=0;l<f;l++){var h=this.LA(l+1);if(!n(h,p[l]))continue t}return o}}};if(s&&!i){var c=E.map(t,function(t){return E.flatten(t)}),u=E.reduce(c,function(t,e,n){return E.forEach(e,function(e){E.has(t,r(e))||(t[r(e)]=n),E.forEach(e.extendingTokenTypes,function(e){E.has(t,e)||(t[e]=n)})}),t},{});return function(){var t=this.LA(1);return u[o(t)]}}return function(){for(var e=0;e<a;e++){var r=t[e],o=r.length;t:for(var i=0;i<o;i++){for(var s=r[i],c=s.length,u=0;u<c;u++){var p=this.LA(u+1);if(!n(p,s[u]))continue t}return e}}}}function f(t,e,n,r,o){var i=E.every(t,function(t){return 1===t.length}),a=t.length;if(i&&!o){var s=E.flatten(t);if(1===s.length&&E.isEmpty(s[0].extendingTokenTypes)){var c=s[0],u=n(c);return function(){return r(this.LA(1))===u}}var p=E.reduce(s,function(t,e,r){return t[n(e)]=!0,E.forEach(e.extendingTokenTypes,function(e){t[e]=!0}),t},{});return function(){var t=this.LA(1);return p[r(t)]===!0}}return function(){t:for(var n=0;n<a;n++){for(var r=t[n],o=r.length,i=0;i<o;i++){var s=this.LA(i+1);if(!e(s,r[i]))continue t}return!0}return!1}}function l(t,e){function n(t,e){return E.reduce(t,function(t,n,r){if(r!==e){var o=E.map(n,function(t){return t.partialPath});return t.concat(o)}return t},[])}function r(t,e){return void 0===E.find(t,function(t){return E.every(e,function(e,n){return e===t[n]})})}function o(t){for(var e=[],n=0;n<t;n++)e.push([]);return e}for(var i=E.map(t,function(t){return m.possiblePathsFrom([t],1)}),a=o(i.length),s=i,c=1;c<=e;c++){var u=s;s=o(u.length);for(var p=0;p<u.length;p++)for(var f=u[p],l=n(u,p),h=0;h<f.length;h++){var d=f[h].partialPath,y=f[h].suffixDef,g=r(l,d);if(g||E.isEmpty(y)||d.length===e){var v=a[p];T(v,d)||v.push(d)}else{var O=m.possiblePathsFrom(y,c+1,d);s[p]=s[p].concat(O)}}}return a}function h(t,e,n){var r=new A(t,O.ALTERNATION);return e.accept(r),l(r.result,n)}function d(t,e,n,r){var o=new A(t,n);e.accept(o);var i=o.result,a=new R(e,t,n),s=a.startWalking(),c=new g.gast.Flat(i),u=new g.gast.Flat(s);return l([c,u],r)}function T(t,e){var n=E.find(t,function(t){return e.length===t.length&&E.every(e,function(e,n){return e===t[n]})});return void 0!==n}var y=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},E=n(4),g=n(7),m=n(16),v=n(17);!function(t){t[t.OPTION=0]="OPTION",t[t.REPETITION=1]="REPETITION",t[t.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",t[t.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",t[t.ALTERNATION=5]="ALTERNATION"}(e.PROD_TYPE||(e.PROD_TYPE={}));var O=e.PROD_TYPE;e.buildLookaheadFuncForOr=r,e.buildLookaheadFuncForOptionalProd=o,e.buildLookaheadForOption=i,e.buildLookaheadForMany=a,e.buildLookaheadForManySep=s,e.buildLookaheadForAtLeastOne=c,e.buildLookaheadForAtLeastOneSep=u,e.buildAlternativesLookAheadFunc=p,e.buildSingleAlternativeLookaheadFunction=f;var R=function(t){function e(e,n,r){t.call(this),this.topProd=e,this.targetOccurrence=n,this.targetProdType=r}return y(e,t),e.prototype.startWalking=function(){return this.walk(this.topProd),this.restDef},e.prototype.checkIsTarget=function(t,e,n,r){return t.occurrenceInParent===this.targetOccurrence&&this.targetProdType===e&&(this.restDef=n.concat(r),!0)},e.prototype.walkOption=function(e,n,r){this.checkIsTarget(e,O.OPTION,n,r)||t.prototype.walkOption.call(this,e,n,r)},e.prototype.walkAtLeastOne=function(e,n,r){this.checkIsTarget(e,O.REPETITION_MANDATORY,n,r)||t.prototype.walkOption.call(this,e,n,r)},e.prototype.walkAtLeastOneSep=function(e,n,r){this.checkIsTarget(e,O.REPETITION_MANDATORY_WITH_SEPARATOR,n,r)||t.prototype.walkOption.call(this,e,n,r)},e.prototype.walkMany=function(e,n,r){this.checkIsTarget(e,O.REPETITION,n,r)||t.prototype.walkOption.call(this,e,n,r)},e.prototype.walkManySep=function(e,n,r){this.checkIsTarget(e,O.REPETITION_WITH_SEPARATOR,n,r)||t.prototype.walkOption.call(this,e,n,r)},e}(v.RestWalker),A=function(t){function e(e,n){t.call(this),this.targetOccurrence=e,this.targetProdType=n,this.result=[]}return y(e,t),e.prototype.checkIsTarget=function(t,e){t.occurrenceInParent===this.targetOccurrence&&this.targetProdType===e&&(this.result=t.definition)},e.prototype.visitOption=function(t){this.checkIsTarget(t,O.OPTION)},e.prototype.visitRepetition=function(t){this.checkIsTarget(t,O.REPETITION)},e.prototype.visitRepetitionMandatory=function(t){this.checkIsTarget(t,O.REPETITION_MANDATORY)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.checkIsTarget(t,O.REPETITION_MANDATORY_WITH_SEPARATOR)},e.prototype.visitRepetitionWithSeparator=function(t){this.checkIsTarget(t,O.REPETITION_WITH_SEPARATOR)},e.prototype.visitAlternation=function(t){this.checkIsTarget(t,O.ALTERNATION)},e}(g.gast.GAstVisitor);e.lookAheadSequenceFromAlternatives=l,e.getLookaheadPathsForOr=h,e.getLookaheadPathsForOptionalProd=d,e.containsPath=T},function(t,e,n){"use strict";function r(t,e,n){function o(e){return e.concat(u.drop(t,s+1))}function i(t){var i=r(o(t.definition),e,n);return a.concat(i)}void 0===n&&(n=[]),n=u.cloneArr(n);for(var a=[],s=0;n.length<e&&s<t.length;){var p=t[s];if(p instanceof c.gast.Flat)return i(p);if(p instanceof c.gast.NonTerminal)return i(p);if(p instanceof c.gast.Option)a=i(p);else{if(p instanceof c.gast.RepetitionMandatory)return i(p);if(p instanceof c.gast.RepetitionMandatoryWithSeparator)return i(p);if(p instanceof c.gast.RepetitionWithSeparator)a=i(p);else if(p instanceof c.gast.Repetition)a=i(p);else{if(p instanceof c.gast.Alternation)return u.forEach(p.definition,function(t){a=i(t)}),a;if(!(p instanceof c.gast.Terminal))throw Error("non exhaustive match");n.push(p.terminalType)}}s++}return a.push({partialPath:n,suffixDef:u.drop(t,1)}),a}function o(t,e,n,r){var o="EXIT_NONE_TERMINAL",a=[o],s="EXIT_ALTERNATIVE",p=!1,f=e.length,l=f-r-1,h=[],d=[];for(d.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!u.isEmpty(d);){var T=d.pop();if(T!==s){var y=T.def,E=T.idx,g=T.ruleStack,m=T.occurrenceStack;if(!u.isEmpty(y)){var v=y[0];if(v===o){var O={idx:E,def:u.drop(y),ruleStack:u.dropRight(g),occurrenceStack:u.dropRight(m)};d.push(O)}else if(v instanceof c.gast.Terminal)if(E<f-1){var R=E+1,A=e[R];if(n(A,v.terminalType)){var O={idx:R,def:u.drop(y),ruleStack:g,occurrenceStack:m};d.push(O)}}else{if(E!==f-1)throw Error("non exhaustive match");h.push({nextTokenType:v.terminalType,nextTokenOccurrence:v.occurrenceInParent,ruleStack:g,occurrenceStack:m}),p=!0}else if(v instanceof c.gast.NonTerminal){var I=u.cloneArr(g);I.push(v.nonTerminalName);var N=u.cloneArr(m);N.push(v.occurrenceInParent);var O={idx:E,def:v.definition.concat(a,u.drop(y)),ruleStack:I,occurrenceStack:N};d.push(O)}else if(v instanceof c.gast.Option){var k={idx:E,def:u.drop(y),ruleStack:g,occurrenceStack:m};d.push(k),d.push(s);var S={idx:E,def:v.definition.concat(u.drop(y)),ruleStack:g,occurrenceStack:m};d.push(S)}else if(v instanceof c.gast.RepetitionMandatory){var L=new c.gast.Repetition(v.definition,v.occurrenceInParent),_=v.definition.concat([L],u.drop(y)),O={idx:E,def:_,ruleStack:g,occurrenceStack:m};d.push(O)}else if(v instanceof c.gast.RepetitionMandatoryWithSeparator){var P=new c.gast.Terminal(v.separator),L=new c.gast.Repetition([P].concat(v.definition),v.occurrenceInParent),_=v.definition.concat([L],u.drop(y)),O={idx:E,def:_,ruleStack:g,occurrenceStack:m};d.push(O)}else if(v instanceof c.gast.RepetitionWithSeparator){var k={idx:E,def:u.drop(y),ruleStack:g,occurrenceStack:m};d.push(k),d.push(s);var P=new c.gast.Terminal(v.separator),x=new c.gast.Repetition([P].concat(v.definition),v.occurrenceInParent),_=v.definition.concat([x],u.drop(y)),S={idx:E,def:_,ruleStack:g,occurrenceStack:m};d.push(S)}else if(v instanceof c.gast.Repetition){var k={idx:E,def:u.drop(y),ruleStack:g,occurrenceStack:m};d.push(k),d.push(s);var x=new c.gast.Repetition(v.definition,v.occurrenceInParent),_=v.definition.concat([x],u.drop(y)),S={idx:E,def:_,ruleStack:g,occurrenceStack:m};d.push(S)}else if(v instanceof c.gast.Alternation)for(var F=v.definition.length-1;F>=0;F--){var M=v.definition[F],C={idx:E,def:M.definition.concat(u.drop(y)),ruleStack:g,occurrenceStack:m};d.push(C),d.push(s)}else if(v instanceof c.gast.Flat)d.push({idx:E,def:v.definition.concat(u.drop(y)),ruleStack:g,occurrenceStack:m});else{if(!(v instanceof c.gast.Rule))throw Error("non exhaustive match");d.push(i(v,E,g,m))}}}else p&&u.last(d).idx<=l&&d.pop()}return h}function i(t,e,n,r){var o=u.cloneArr(n);o.push(t.name);var i=u.cloneArr(r);return i.push(1),{idx:e,def:t.definition,ruleStack:o,occurrenceStack:i}}var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=n(17),c=n(7),u=n(4),p=n(8),f=n(14),l=function(t){function e(e,n){t.call(this),this.topProd=e,this.path=n,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}return a(e,t),e.prototype.startWalking=function(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=u.cloneArr(this.path.ruleStack).reverse(),this.occurrenceStack=u.cloneArr(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes},e.prototype.walk=function(e,n){void 0===n&&(n=[]),this.found||t.prototype.walk.call(this,e,n)},e.prototype.walkProdRef=function(t,e,n){if(t.referencedRule.name===this.nextProductionName&&t.occurrenceInParent===this.nextProductionOccurrence){var r=e.concat(n);this.updateExpectedNext(),this.walk(t.referencedRule,r)}},e.prototype.updateExpectedNext=function(){u.isEmpty(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())},e}(s.RestWalker);e.AbstractNextPossibleTokensWalker=l;var h=function(t){function e(e,n){t.call(this,e,n),this.path=n,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=p.tokenName(this.path.lastTok),this.nextTerminalOccurrence=this.path.lastTokOccurrence}return a(e,t),e.prototype.walkTerminal=function(t,e,n){if(this.isAtEndOfPath&&p.tokenName(t.terminalType)===this.nextTerminalName&&t.occurrenceInParent===this.nextTerminalOccurrence&&!this.found){var r=e.concat(n),o=new c.gast.Flat(r);this.possibleTokTypes=f.first(o),this.found=!0}},e}(l);e.NextAfterTokenWalker=h;var d=function(t){function e(e,n){t.call(this),this.topRule=e,this.occurrence=n,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}return a(e,t),e.prototype.startWalking=function(){return this.walk(this.topRule),this.result},e}(s.RestWalker);e.AbstractNextTerminalAfterProductionWalker=d;var T=function(t){function e(){t.apply(this,arguments)}return a(e,t),e.prototype.walkMany=function(e,n,r){if(e.occurrenceInParent===this.occurrence){var o=u.first(n.concat(r));this.result.isEndOfRule=void 0===o,o instanceof c.gast.Terminal&&(this.result.token=o.terminalType,this.result.occurrence=o.occurrenceInParent)}else t.prototype.walkMany.call(this,e,n,r)},e}(d);e.NextTerminalAfterManyWalker=T;var y=function(t){function e(){t.apply(this,arguments)}return a(e,t),e.prototype.walkManySep=function(e,n,r){if(e.occurrenceInParent===this.occurrence){var o=u.first(n.concat(r));this.result.isEndOfRule=void 0===o,o instanceof c.gast.Terminal&&(this.result.token=o.terminalType,this.result.occurrence=o.occurrenceInParent)}else t.prototype.walkManySep.call(this,e,n,r)},e}(d);e.NextTerminalAfterManySepWalker=y;var E=function(t){function e(){t.apply(this,arguments)}return a(e,t),e.prototype.walkAtLeastOne=function(e,n,r){if(e.occurrenceInParent===this.occurrence){var o=u.first(n.concat(r));this.result.isEndOfRule=void 0===o,o instanceof c.gast.Terminal&&(this.result.token=o.terminalType,this.result.occurrence=o.occurrenceInParent)}else t.prototype.walkAtLeastOne.call(this,e,n,r)},e}(d);e.NextTerminalAfterAtLeastOneWalker=E;var g=function(t){function e(){t.apply(this,arguments)}return a(e,t),e.prototype.walkAtLeastOneSep=function(e,n,r){if(e.occurrenceInParent===this.occurrence){var o=u.first(n.concat(r));this.result.isEndOfRule=void 0===o,o instanceof c.gast.Terminal&&(this.result.token=o.terminalType,this.result.occurrence=o.occurrenceInParent)}else t.prototype.walkAtLeastOneSep.call(this,e,n,r)},e}(d);e.NextTerminalAfterAtLeastOneSepWalker=g,e.possiblePathsFrom=r,e.nextPossibleTokensAfter=o},function(t,e,n){"use strict";function r(t,e,n){var r=[new o.gast.Option([new o.gast.Terminal(t.separator)].concat(t.definition))],i=r.concat(e,n);return i}var o=n(7),i=n(4),a=function(){function t(){}return t.prototype.walk=function(t,e){var n=this;void 0===e&&(e=[]),i.forEach(t.definition,function(r,a){var s=i.drop(t.definition,a+1);if(r instanceof o.gast.NonTerminal)n.walkProdRef(r,s,e);else if(r instanceof o.gast.Terminal)n.walkTerminal(r,s,e);else if(r instanceof o.gast.Flat)n.walkFlat(r,s,e);else if(r instanceof o.gast.Option)n.walkOption(r,s,e);else if(r instanceof o.gast.RepetitionMandatory)n.walkAtLeastOne(r,s,e);else if(r instanceof o.gast.RepetitionMandatoryWithSeparator)n.walkAtLeastOneSep(r,s,e);else if(r instanceof o.gast.RepetitionWithSeparator)n.walkManySep(r,s,e);else if(r instanceof o.gast.Repetition)n.walkMany(r,s,e);else{if(!(r instanceof o.gast.Alternation))throw Error("non exhaustive match");n.walkOr(r,s,e)}})},t.prototype.walkTerminal=function(t,e,n){},t.prototype.walkProdRef=function(t,e,n){},t.prototype.walkFlat=function(t,e,n){var r=e.concat(n);this.walk(t,r)},t.prototype.walkOption=function(t,e,n){var r=e.concat(n);this.walk(t,r)},t.prototype.walkAtLeastOne=function(t,e,n){var r=[new o.gast.Option(t.definition)].concat(e,n);this.walk(t,r)},t.prototype.walkAtLeastOneSep=function(t,e,n){var o=r(t,e,n);this.walk(t,o)},t.prototype.walkMany=function(t,e,n){var r=[new o.gast.Option(t.definition)].concat(e,n);this.walk(t,r)},t.prototype.walkManySep=function(t,e,n){var o=r(t,e,n);this.walk(t,o)},t.prototype.walkOr=function(t,e,n){var r=this,a=e.concat(n);i.forEach(t.definition,function(t){var e=new o.gast.Flat([t]);r.walk(e,a)})},t}();e.RestWalker=a},function(t,e,n){"use strict";function r(t){var e=new c.HashTable;return f.forEach(t,function(t){var n=new d(t).startWalking();e.putAll(n)}),e}function o(t,e){return t.name+e+l.IN}function i(t){var e=h.tokenName(t.terminalType);return e+t.occurrenceInParent+l.IN}var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=n(17),c=n(3),u=n(7),p=n(14),f=n(4),l=n(19),h=n(8),d=function(t){function e(e){t.call(this),this.topProd=e,this.follows=new c.HashTable}return a(e,t),e.prototype.startWalking=function(){return this.walk(this.topProd),this.follows},e.prototype.walkTerminal=function(t,e,n){},e.prototype.walkProdRef=function(t,e,n){var r=o(t.referencedRule,t.occurrenceInParent)+this.topProd.name,i=e.concat(n),a=new u.gast.Flat(i),s=p.first(a);this.follows.put(r,s)},e}(s.RestWalker);e.ResyncFollowsWalker=d,e.computeAllProdsFollows=r,e.buildBetweenProdsFollowPrefix=o,e.buildInProdFollowPrefix=i},function(t,e){"use strict";e.IN="_~IN~_"},function(t,e,n){"use strict";function r(t,n,r){e.terminalNameToConstructor=r;var i=" "+t,a=g(" "+i),s=m(a),c=v(s),u=new C.Range(0,t.length+2);return o(n,u,c,t)}function o(t,e,n,r){var o=new w.gast.Rule(t,[],r);return y(o,e,n)}function i(t,e){switch(t.type){case b.AT_LEAST_ONE:return u(t,e);case b.AT_LEAST_ONE_SEP:return p(t,e);case b.MANY_SEP:return l(t,e);case b.MANY:return f(t,e);case b.OPTION:return d(t,e);case b.OR:return T(t,e);case b.FLAT:return y(new w.gast.Flat([]),t.range,e);case b.REF:return a(t);case b.TERMINAL:return s(t);default:throw Error("non exhaustive match")}}function a(t){var e=W.exec(t.text),n=void 0===e[1],r=n?1:parseInt(e[1],10),o=e[2],i=new w.gast.NonTerminal(o,void 0,r);return i.implicitOccurrenceIndex=n,i}function s(t){var n=U.exec(t.text),r=void 0===n[1],o=r?1:parseInt(n[1],10),i=n[2],a=e.terminalNameToConstructor[i];if(!a)throw Error("Terminal Token name: "+i+" not found");var s=new w.gast.Terminal(a,o);return s.implicitOccurrenceIndex=r,s}function c(t,e,n,r){var o=t.exec(n.text),i=void 0===o[1];return e.occurrenceInParent=i?1:parseInt(o[1],10),e.implicitOccurrenceIndex=i,y(e,n.range,r)}function u(t,e){return c(q,new w.gast.RepetitionMandatory([]),t,e)}function p(t,e){return h(t,e,w.gast.RepetitionMandatoryWithSeparator,X)}function f(t,e){return c(j,new w.gast.Repetition([]),t,e)}function l(t,e){return h(t,e,w.gast.RepetitionWithSeparator,H)}function h(t,n,r,o){var i=o.exec(t.text),a=void 0===i[1],s=a?1:parseInt(i[1],10),c=i[2],u=e.terminalNameToConstructor[c];if(!u)throw Error("Separator Terminal Token name: "+c+" not found");var p=new r([],u,s);return p.implicitOccurrenceIndex=a,y(p,t.range,n)}function d(t,e){return c(G,new w.gast.Option([]),t,e)}function T(t,e){return c(J,new w.gast.Alternation([]),t,e)}function y(t,e,n){var r=E(e,n),o=D.sortBy(r,function(t){return t.range.start}),a=[];return D.forEach(o,function(t){a.push(i(t,n))}),t.definition=a,t}function E(t,e){return D.filter(e,function(n){var r=t.strictlyContainsRange(n.range),o=D.every(e,function(e){var r=e.range.strictlyContainsRange(n.range),o=e.range.isStrictlyContainedInRange(t);return!(r&&o)});return r&&o})}function g(t){var e=t.replace(et,""),n=e.replace(nt,"");return n}function m(t){var e=t.replace(rt,""),n=e.replace(ot,"");return n}function v(t){var e=O(t),n=R(t),r=A(t),o=I(t),i=N(t),a=k(t),s=S(t),c=L(t);return[].concat(e,n,r,o,i,a,s,c)}function O(t){return P(t,b.TERMINAL,z)}function R(t){return P(t,b.REF,Y)}function A(t){return x(t,b.AT_LEAST_ONE,$)}function I(t){return x(t,b.AT_LEAST_ONE_SEP,Z)}function N(t){return x(t,b.MANY,V)}function k(t){return x(t,b.MANY_SEP,B)}function S(t){return x(t,b.OPTION,K)}function L(t){var e=x(t,b.OR,Q),n=_(e);return e.concat(n)}function _(t){var e=[];D.forEach(t,function(t){var n=F(t.text,b.FLAT,tt,it),r=t.range.start;D.forEach(n,function(t){t.range.start+=r,t.range.end+=r}),e=e.concat(n)});var n=D.uniq(e,function(t){return t.type+"~"+t.range.start+"~"+t.range.end+"~"+t.text});return n}function P(t,e,n){for(var r,o=[];r=n.exec(t);){var i=r.index,a=n.lastIndex,s=new C.Range(i,a),c=r[0];o.push({range:s,text:c,type:e})}return o}function x(t,e,n){return F(t,e,n,at)}function F(t,e,n,r){for(var o,i=[];o=n.exec(t);){var a=o.index,s=r(a+o[0].length,t),c=new C.Range(a,s),u=t.substr(a,s-a+1);i.push({range:c,text:u,type:e})}return i}function M(t,e,n,r){for(var o=[1],i=-1;!D.isEmpty(o)&&i+n<r.length;){i++;var a=r.charAt(n+i);a===t?o.push(1):a===e&&o.pop()}if(D.isEmpty(o))return i+n;throw new Error("INVALID INPUT TEXT, UNTERMINATED PARENTHESIS")}var C=n(21),w=n(7),D=n(4);!function(t){t[t.OPTION=0]="OPTION",t[t.OR=1]="OR",t[t.MANY=2]="MANY",t[t.MANY_SEP=3]="MANY_SEP",t[t.AT_LEAST_ONE=4]="AT_LEAST_ONE",t[t.AT_LEAST_ONE_SEP=5]="AT_LEAST_ONE_SEP",t[t.REF=6]="REF",t[t.TERMINAL=7]="TERMINAL",t[t.FLAT=8]="FLAT"}(e.ProdType||(e.ProdType={}));var b=e.ProdType,U=/\.\s*CONSUME(\d)?\s*\(\s*(?:[a-zA-Z_$]\w*\s*\.\s*)*([a-zA-Z_$]\w*)/,z=new RegExp(U.source,"g"),W=/\.\s*SUBRULE(\d)?\s*\(\s*(?:[a-zA-Z_$]\w*\s*\.\s*)*([a-zA-Z_$]\w*)/,Y=new RegExp(W.source,"g"),G=/\.\s*OPTION(\d)?\s*\(/,K=new RegExp(G.source,"g"),j=/\.\s*MANY(\d)?\s*\(/,V=new RegExp(j.source,"g"),H=/\.\s*MANY_SEP(\d)?\s*\(\s*(?:[a-zA-Z_$]\w*\s*\.\s*)*([a-zA-Z_$]\w*)/,B=new RegExp(H.source,"g"),X=/\.\s*AT_LEAST_ONE_SEP(\d)?\s*\(\s*(?:[a-zA-Z_$]\w*\s*\.\s*)*([a-zA-Z_$]\w*)/,Z=new RegExp(X.source,"g"),q=/\.\s*AT_LEAST_ONE(\d)?\s*\(/,$=new RegExp(q.source,"g"),J=/\.\s*OR(\d)?\s*\(/,Q=new RegExp(J.source,"g"),tt=/\s*(ALT)\s*:/g;e.terminalNameToConstructor={},e.buildTopProduction=r,e.buildProdGast=i,e.getDirectlyContainedRanges=E;var et=/\/\/.*/g,nt=/\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\//g,rt=/"([^\\"]+|\\([bfnrtv"\\/]|u[0-9a-fA-F]{4}))*"/g,ot=/'([^\\']+|\\([bfnrtv'\\/]|u[0-9a-fA-F]{4}))*'/g;e.removeComments=g,e.removeStringLiterals=m,e.createRanges=v,e.createTerminalRanges=O,e.createRefsRanges=R,e.createAtLeastOneRanges=A,e.createAtLeastOneSepRanges=I,e.createManyRanges=N,e.createManySepRanges=k,e.createOptionRanges=S,e.createOrRanges=L;var it=D.partial(M,"{","}"),at=D.partial(M,"(",")");e.createOrPartRanges=_,e.findClosingOffset=M},function(t,e){"use strict";function n(t,e){return!(t<0||e<t)}var r=function(){function t(t,e){if(this.start=t,this.end=e,!n(t,e))throw new Error("INVALID RANGE")}return t.prototype.contains=function(t){return this.start<=t&&this.end>=t},t.prototype.containsRange=function(t){return this.start<=t.start&&this.end>=t.end},t.prototype.isContainedInRange=function(t){return t.containsRange(this)},t.prototype.strictlyContainsRange=function(t){return this.start<t.start&&this.end>t.end},t.prototype.isStrictlyContainedInRange=function(t){return t.strictlyContainsRange(this)},t}();e.Range=r,e.isValidRange=n},function(t,e,n){"use strict";function r(){o.clearCache()}var o=n(2);e.clearCache=r}])});